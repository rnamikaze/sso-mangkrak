import{r as o,j as e}from"./app-D-tiouko.js";import"./index.es-B8LRRmtI.js";import A from"./HistoryTaskChildItem-DnOJmrUt.js";import M from"./TaskChildEmpty-B_b3DY1u.js";import{F as r}from"./flex-B3u7Yjy3.js";import{C as L}from"./circular-progress-CsYzCqAF.js";import{A as K,a as V}from"./alert-dialog-CrzKKWCS.js";import{M as _,b as q,c as J,d as N}from"./modal-overlay-BoBZIlNT.js";import{B as C}from"./button-b_OXMfTF.js";import{u as Q}from"./use-boolean-D4otBCAS.js";import{u as U}from"./use-disclosure-BEJBEFUx.js";import"./input-DQdjWTTb.js";import"./use-form-control-CwhKtZKy.js";import"./use-merge-refs-BFB3bSvN.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./select-BZQ40FW4.js";import"./badge-vqBRhT-u.js";import"./index-BLEpFBfl.js";import"./box-B4e4n_hZ.js";import"./typeof-BVQB8lKn.js";function I(n){return typeof n!="string"?"":n.length<=25?n:n.slice(0,25)+"..."}const Ie=({mainTheme:n,index:s,task:t,setSelected:f,toggleSelectedDisableItem:X,selected:l,deleteTask:v,addChildToParent:W,updateChildToParent:z,deleteChildToParent:k,activeBio:T,updateSubTask:E,userActiveLevel:x,callMyToast:H})=>{const[Y,u]=Q(!1),[i,g]=o.useState(!1),[P,B]=o.useState(!1),[Z,F]=o.useState(!1),[d,$]=o.useState(window.innerWidth),[c,w]=o.useState(0),{isOpen:R,onOpen:ee,onClose:j}=U(),b=o.useRef(),y=()=>{const p=h=>{const S=h.map(m=>{switch(m){default:return parseInt(m)}});return(S.reduce((m,O)=>m+O,0)/S.length).toFixed(2)},a=[];return t.childTask.map(h=>{a.push(parseInt(h.progress_int))}),a.length<1&&a.push(0),p(a)},D=()=>c>=65?"blue.400":c>=30?"orange.400":"red.400",G=o.useCallback(()=>{w(y())},[t]);return o.useEffect(()=>{w(y())},[]),o.useEffect(()=>{F(t),G()},[t]),e.jsxs(r,{direction:"column",mb:1,children:[e.jsxs(r,{bg:l===s?"green.600":"gray.100",boxShadow:"base",color:l===s?"white":"black",my:1,borderLeft:"0px",borderRight:"0px",fontWeight:l===s?"bold":"inherit",px:3,py:2,onMouseEnter:u.on,onMouseLeave:u.off,transition:"250ms ease-out",cursor:"pointer",onClick:()=>{l===s?(f(null),g(!1)):(f(s),g(!0))},tabIndex:0,direction:["column","column","column","row"],children:[e.jsx(r,{alignItems:"center",width:["100%","100%","100%","7%"],maxWidth:["100%","100%","100%","7%"],flexGrow:1,color:"gray.500",fontSize:"20px"}),e.jsx(r,{width:["100%","100%","100%","30%"],maxWidth:["100%","100%","100%","30%"],flexGrow:1,whiteSpace:"wrap",fontSize:["sm","sm","sm","md"],children:d<480||i?t.title:I(t.title)}),e.jsx(r,{width:["100%","100%","100%","30%"],maxWidth:["100%","100%","100%","30%"],flexGrow:1,fontSize:["11px","11px","11px","sm"],px:1,borderLeft:d>480?"0px":"2px",borderColor:"gray.500",color:i?"whitesmoke":n.heading,children:d<480||i?t.comment:I(t.comment)}),e.jsx(r,{width:["100%","100%","100%","20%"],maxWidth:["100%","100%","100%","20%"],flexGrow:1,fontSize:["sm","sm","sm","md"],display:["none","none","none","flex"],children:"-"}),e.jsxs(r,{width:["100%","100%","100%","13%"],maxWidth:["100%","100%","100%","13%"],flexGrow:1,fontSize:["sm","sm","sm","md"],mt:[2,2,2,0],alignItems:"center",justifyContent:["flex-end","flex-end","flex-end","flex-start"],children:[e.jsx(L,{value:c,size:"25px",thickness:"20px",color:i?"white":D(),trackColor:i?"transparent":"green.100",capIsRound:!0}),"  ",c,"%"]})]}),i?e.jsxs(e.Fragment,{children:[t.childTask.map((p,a)=>e.jsx(A,{userActiveLevel:x,callMyToast:H,deleteChildToParent:k,updateChildToParent:z,task:p,index:s,mainTheme:n,updateSubTask:E},a)),t.childTask.length<1?e.jsx(r,{px:3,py:1,fontWeight:"bold",children:"Kosong"}):"",P?e.jsx(e.Fragment,{children:e.jsx(M,{userActiveLevel:x,activeBio:T,taskId:t.id,addChildToParent:W,mainTheme:n,index:s,setShowTaskEmpty:B})}):"",e.jsx(r,{borderBottom:"5px",borderStyle:"double",borderColor:"gray.200",mt:2,boxShadow:"md"})]}):"",e.jsx(K,{isOpen:R,leastDestructiveRef:b,onClose:j,children:e.jsx(_,{display:"flex",alignItems:"center",children:e.jsxs(V,{width:["85vw","85vw","inherit","inherit"],children:[e.jsx(q,{fontSize:"md",fontWeight:"bold",children:"Hapus Tugas?"}),e.jsx(J,{fontSize:"sm",children:"Setelah Menghapus, anda tidak bisa mngembalikannya."}),e.jsxs(N,{children:[e.jsx(C,{size:"sm",ref:b,onClick:j,children:"Batal"}),e.jsx(C,{size:"sm",colorScheme:"red",onClick:()=>{v(t.id)},ml:3,children:"Hapus"})]})]})})})]})};export{Ie as default};
