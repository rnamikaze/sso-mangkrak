import{r as s,j as e}from"./app-D-tiouko.js";import{g as v,c as y,d as N}from"./DateTools-DazUeWyn.js";import{T as K,aO as B,aP as R,l as M}from"./index-BLEpFBfl.js";import{F as S}from"./index.es-B8LRRmtI.js";import U from"./LoadingAnim-Cc8bZnTt.js";import{F as t}from"./flex-B3u7Yjy3.js";import{H}from"./heading-C-TpxM4d.js";import{F as u,c as O}from"./use-form-control-CwhKtZKy.js";import{F as c}from"./form-label-B_0GP0Fr.js";import{S as F}from"./select-BZQ40FW4.js";import{S as L}from"./switch-R7GR36iL.js";import{I as w}from"./input-DQdjWTTb.js";import{B as k}from"./button-b_OXMfTF.js";import{T as q}from"./textarea-C6m91mAu.js";/* empty css                          */import"./use-merge-refs-BFB3bSvN.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";const de=({showToast:h,handlePensiViewChange:m})=>{const[g,d]=s.useState(null),[f,p]=s.useState(!1),o=b=>{const i=parseInt(b.target.value);d(isNaN(i)?null:i)},x=()=>{switch(g){case 1:return e.jsx(G,{showToast:h,pengajuanType:g,handlePensiViewChange:m,setIsShowLoading:p});case 2:return e.jsx(J,{showToast:h,pengajuanType:g,handlePensiViewChange:m,setIsShowLoading:p});default:return e.jsxs(t,{px:3,py:1,fontSize:["20px","20px","25px","25px"],justifyContent:"center",alignItems:"center",width:"100%",height:"150px",color:"gray.500",direction:"column",children:[e.jsx(S,{icon:K}),e.jsx(t,{children:"Pilih Pengajuan"})]})}};return e.jsxs(t,{position:"relative",flexGrow:1,direction:"column",children:[f?e.jsx(t,{width:"100%",height:"100%",bg:"gray.100",position:"absolute",top:"0px",left:"0px",zIndex:30,justifyContent:"center",alignItems:"center",children:e.jsx(U,{text:"mengirim"})}):"",e.jsx(H,{py:2,as:"h3",fontSize:"19px",color:"gray.600",fontWeight:"bold",letterSpacing:"1px",className:"lato-regular",children:"Pengajuan Cuti/Izin Baru"}),e.jsxs(t,{direction:"column",children:[e.jsx(t,{bg:"gray.100",borderBottom:"2px",borderColor:"gray.300",children:e.jsx(t,{px:3,py:2,width:["100%","100%","300px","300px"],children:e.jsxs(u,{children:[e.jsx(c,{children:"Pilih Pengajuan"}),e.jsxs(F,{borderRadius:"6px",size:"md",placeholder:"Pilih Pengajuan",onChange:o,bg:"white",children:[e.jsx("option",{value:"1",children:"Pengajuan Cuti"}),e.jsx("option",{value:"2",children:"Pengajuan Izin"})]})]})})}),e.jsx(t,{mt:2,bg:"gray.100",borderBottom:"2px",borderColor:"gray.300",mb:"20px",children:x()})]})]})},G=({pengajuanType:h,showToast:m,handlePensiViewChange:g,setIsShowLoading:d})=>{const[f,p]=s.useState(null);s.useState([2,3,90,2,2,2,2,2,1,18,40]);const[o,x]=s.useState(v()),[b,i]=s.useState(v()),[j,C]=s.useState(!1),[P,A]=s.useState(null),[I,D]=s.useState([]),z=n=>{const a=parseInt(n.target.value);p(isNaN(a)?null:a),x(v()),i(o),C(!1)},T=n=>{const a=parseInt(n.target.value);A(isNaN(a)?null:a)},r=()=>{d(!0);const n=N(o,b),a={cutiType:f,cutiDateArr:JSON.stringify(n),pengajuanType:h,idPegawaiPenugasan:P};axios.post("/sik/send-pengajuan",a).then(function(l){l.data.success?(setTimeout(()=>{d(!1),g(2)},2e3),m(l.data.message,"success")):m(l.data.message,"warning")}).catch(function(l){m("Axios Error, See Browser Log","warning")})};return s.useEffect(()=>{axios.post("/sik/get-kawan-seunit",{by:"@rnamikaze"}).then(function(n){D(n.data.allKawan)}).catch(function(n){}),i(v())},[]),e.jsxs(t,{px:3,py:2,width:"100%",direction:"column",children:[e.jsxs(u,{width:"100%",children:[e.jsx(c,{mb:1,pb:0,children:"Pengajuan Cuti"}),e.jsxs(F,{width:"100%",mt:0,borderRadius:"6px",size:"md",placeholder:"Pilih Pengajuan",bg:"white",onChange:z,children:[e.jsx("option",{value:"1",children:"Cuti Reguler"}),e.jsx("option",{value:"2",children:"Cuti Menikah"}),e.jsx("option",{value:"3",children:"Cuti Melahirkan"}),e.jsx("option",{value:"4",children:"Cuti Pernikahan Anak"}),e.jsx("option",{value:"5",children:"Cuti Khitan Anak"}),e.jsx("option",{value:"6",children:"Cuti Istri Sah Melahirkan"}),e.jsx("option",{value:"7",children:"Cuti Istri Sah Keguguran"}),e.jsx("option",{value:"8",children:"Cuti Keluarga Meninggal"}),e.jsx("option",{value:"9",children:"Cuti Pernikahan Kakak atau Adik Kandung"}),e.jsx("option",{value:"10",children:"Cuti Ibadah Umrah"}),e.jsx("option",{value:"11",children:"Cuti Ibadah Haji"})]})]}),f===null?"":e.jsxs(t,{direction:"column",children:[e.jsxs(t,{direction:["column","column","row","row"],children:[e.jsxs(u,{width:["100%","100%","50%","50%"],mt:2,mr:3,children:[e.jsxs(t,{width:"100%",justifyContent:"space-between",children:[e.jsx(c,{mb:1,pb:0,flexGrow:1,children:"Pilih Tanggal Mulai"}),e.jsxs(u,{display:"flex",alignItems:"center",width:"max-content",children:[e.jsx(c,{htmlFor:"email-alerts",mb:"0",children:"Sampai?"}),e.jsx(L,{isChecked:j,onChange:()=>{C(n=>!n),j&&i(o)},colorScheme:"green",id:"email-alerts"})]})]}),e.jsx(w,{min:y(4),value:o,bg:"white",type:"date",onChange:n=>{const a=n.target.value;x(a),i(a)}})]}),e.jsxs(u,{width:["100%","100%","50%","50%"],mt:2,children:[e.jsx(c,{mb:1,pb:0,children:"Pilih Tanggal Terakhir"}),e.jsx(w,{min:o,value:b,isDisabled:!j,bg:"white",type:"date",onChange:n=>{const a=n.target.value;i(a)}})]})]}),e.jsx(t,{mt:4,children:e.jsxs(u,{children:[e.jsx(c,{mb:1,pb:0,children:"Pilih Penugasan"}),e.jsx(F,{onChange:T,bg:"white",placeholder:"Pilih Pegawai",children:I.map((n,a)=>e.jsx("option",{value:n.master_id,children:n.fullname},a))})]})}),P!==null?e.jsx(t,{mt:"20px",width:"100%",justifyContent:"flex-end",children:e.jsxs(k,{onClick:r,colorScheme:"blue",children:["Ajukan  ",e.jsx(S,{icon:B})]})}):""]})]})},J=({showToast:h,handlePensiViewChange:m,setIsShowLoading:g})=>{const[d,f]=s.useState(y(0)),[p,o]=s.useState(y(0)),[x,b]=s.useState(!1);s.useState(!1);const[i,j]=s.useState([""]),[C,P]=s.useState(""),A=()=>{j([...i,""])},I=r=>{const n=i.filter((a,l)=>l!==r);j(n)},D=r=>{const n=r.target.value;P(n)},z=(r,n)=>{const a=r.target.value,l=i.map((_,E)=>E===n?a:_);j(l)},T=r=>{r.preventDefault(),g(!0);const n=N(d,p),a={cuti_date_arr:JSON.stringify(n),deskripsi_izin:C,file_pendukung_arr:JSON.stringify(i),by:"@rnamikaze"};axios.post("/sik/send-pengajuan-izin",a).then(function(l){l.data.success?(setTimeout(()=>{g(!1),m(2)},2e3),h(l.data.message,"success")):h(l.data.message,"warning")}).catch(function(l){h("Axios Error, See Browser Log","warning")})};return e.jsxs(t,{as:"form",onSubmit:T,px:3,py:2,width:"100%",direction:"column",children:[e.jsxs(t,{direction:["column","column","row","row"],children:[e.jsxs(u,{width:["100%","100%","50%","50%"],mt:2,mr:3,children:[e.jsxs(t,{width:"100%",justifyContent:"space-between",children:[e.jsx(c,{mb:1,pb:0,flexGrow:1,children:"Pilih Tanggal Mulai"}),e.jsxs(u,{display:"flex",alignItems:"center",width:"max-content",children:[e.jsx(c,{htmlFor:"email-alerts",mb:"0",children:"Sampai?"}),e.jsx(L,{isChecked:x,onChange:()=>{b(r=>!r),x&&o(d)},colorScheme:"green",id:"email-alerts"})]})]}),e.jsx(w,{min:y(),value:d,bg:"white",type:"date",onChange:r=>{const n=r.target.value;f(n),o(n)},required:!0})]}),e.jsxs(u,{width:["100%","100%","50%","50%"],mt:2,children:[e.jsx(c,{mb:1,pb:0,children:"Pilih Tanggal Terakhir"}),e.jsx(w,{min:d,value:p,isDisabled:!x,bg:"white",type:"date",onChange:r=>{const n=r.target.value;o(n)}})]})]}),e.jsxs(u,{mt:3,children:[e.jsx(c,{mb:1,pb:0,children:"Deskripsi Izin"}),e.jsx(q,{bg:"white",placeholder:"Tulis alasan pengajuan izin.",resize:"vertical",rows:5,minLength:50,required:!0,value:C,onChange:D}),e.jsx(O,{children:"Sedetail mungkin."})]}),e.jsxs(t,{mt:3,direction:"column",children:[e.jsx(t,{fontWeight:"bold",mb:1,fontSize:"15px",children:"Link/URL File Pendukung"}),i.map((r,n)=>e.jsxs(t,{mb:1,children:[e.jsx(w,{placeholder:"https://drive.google.com/file_pendukung",bg:"white",type:"text",minLength:15,onChange:a=>{z(a,n)},value:i[n],required:!0}),n<1?"":e.jsx(k,{onClick:()=>{I(n)},ml:1,colorScheme:"red",children:e.jsx(S,{icon:R})})]},n)),e.jsx(t,{mt:2,justifyContent:"flex-end",children:e.jsxs(k,{width:"100px",colorScheme:"facebook",onClick:A,isDisabled:i[i.length-1].length<15,children:["Tambah ",e.jsx(S,{icon:M})]})})]}),e.jsx(t,{mt:2,children:e.jsxs(k,{type:"submit",colorScheme:"blue",children:["Ajukan  ",e.jsx(S,{icon:B})]})})]})};export{de as default};
