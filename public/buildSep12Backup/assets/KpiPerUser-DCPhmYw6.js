import{r as i,j as e,S as ee}from"./app-D-tiouko.js";import te from"./GlobalPeriode-C_nRPlxf.js";import{h as re}from"./moment-C5S46NFB.js";import ie from"./UniversalLoadingSmall-C-I_Qg_P.js";import{F as h}from"./flex-B3u7Yjy3.js";import{T as K}from"./text-B41xTBOs.js";import{H as M}from"./heading-C-TpxM4d.js";import{T as E,a as A,b as x,c as I}from"./thead-DETgiIbU.js";import{T as O,a as l}from"./tr-BufVKpkZ.js";import{T as C}from"./table-caption-B1PSiDol.js";import{T as a}from"./td-BkObweLZ.js";import{T as ae}from"./tfooter-C5O880ql.js";import{C as se,a as ne}from"./card-body-CbBa1nJf.js";import"./index.es-B8LRRmtI.js";import"./index-BLEpFBfl.js";import"./badge-vqBRhT-u.js";function B(p){let d=p.toString().split("."),b=d[0],u=d.length>1?d[1]:"",m="Rp"+b.replace(/\B(?=(\d{3})+(?!\d))/g,".");return u!==""&&(m+=","+u),m}function le(p){const d=new Date(p),b=d.getDate();d.getMonth()+1;let u=null,j=null,m=null,f=null,S=null,P=null,w=null,T=null;if(b<20){const t=new Date(d);t.setMonth(t.getMonth()-1),t.setDate(20),u=t.toISOString().slice(0,10),m=t.getMonth(),S=t.getDate(),w=t.getFullYear();const n=new Date(d);n.setDate(19),j=n.toISOString().slice(0,10),f=n.getMonth(),P=n.getDate(),T=n.getFullYear()}else{const t=new Date(d);t.setDate(20),u=t.toISOString().slice(0,10),m=t.getMonth(),S=t.getDate(),w=t.getFullYear();const n=new Date(d);n.setMonth(n.getMonth()+1),n.setDate(19),j=n.toISOString().slice(0,10),f=n.getMonth(),P=n.getDate(),T=n.getFullYear()}return[u,j,m,f,S,P,w,T]}const ke=({targetId:p=1})=>{const[d,b]=i.useState("2014-11-11"),[u,j]=i.useState(""),[m,f]=i.useState("2014-11-11"),[S,P]=i.useState(""),[w,T]=i.useState(""),[t,n]=i.useState(null),[s,oe]=i.useState([{id:1,title:"Sangat baik",valueTo:100,valueFrom:91},{id:2,title:"Baik",valueTo:90,valueFrom:81},{id:3,title:"Cukup baik",valueTo:80,valueFrom:71},{id:4,title:"Kurang baik",valueTo:70,valueFrom:61},{id:5,title:"Sangat tidak baik",valueTo:60,valueFrom:0}]),[N,$]=i.useState(null),[J,W]=i.useState(0),[v,_]=i.useState([]),[F,G]=i.useState(0),[L,H]=i.useState(0),[R,U]=i.useState(4e5),[g,V]=i.useState([]),[q,z]=i.useState(!1),[Q,de]=i.useState(re().format("YYYY-MM-DD")),[Y,X]=i.useState(!1),Z=()=>{const o=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],r=le(Q);let c=r[0],y=r[1],k=`${r[4]} ${o[r[2]]} ${r[6]}`,D=`${r[5]} ${o[r[3]]} ${r[7]}`;b(c),f(y),j(k),P(D),X(!0)};return i.useEffect(()=>{let o=null,r=[];z(!0),Y&&axios.post("/sik/get-task-percentage-per-user",{startDate:d,endDate:m,id:p}).then(function(c){if(o=c.data.taskPercentage,$(c.data.taskPercentage),V(c.data.arrAbsensi),U(c.data.baseNominal),z(!1),o.length>0){const y=o.length;let k=0;o.forEach(D=>{k+=D.percentage_counted,r.push(D.percentage_counted)}),W((k/y).toFixed(2)),_([...v,...r,c.data.arrAbsensi.hadir,c.data.arrAbsensi.terlambat,c.data.arrAbsensi.tidak_hadir])}else W(0)}).catch(function(c){})},[Y]),i.useEffect(()=>{if(v.length>3){const o=v.length;let r=0;v.forEach(c=>{r+=c}),G((r/o).toFixed(2))}},[g]),i.useEffect(()=>{for(let r=0;r<s.length;r++)if(F>=s[r].valueFrom){T(s[r].title),n(s[r].id);break}let o=(R*F).toFixed(0)/100;H(o)},[F]),i.useEffect(()=>{Z()},[]),e.jsxs(h,{direction:"column",width:"100%",children:[e.jsx(h,{bg:"white",py:2,px:1,borderRadius:"6px",mb:3,children:e.jsx(te,{periodeStartFull:u,periodeEndFull:S})}),e.jsxs(h,{direction:"column",py:2,px:3,bg:"white",borderRadius:"6px",width:"100%",overflow:"auto",children:[e.jsx(h,{bg:"gray.100",mb:4,fontWeight:"bold",borderRadius:"6px",px:3,py:2,children:e.jsxs(K,{children:["Base Nominal: ",B(R)]})}),e.jsxs(h,{width:"100%",children:[e.jsxs(h,{direction:"column",flexGrow:"1",children:[e.jsxs(h,{direction:"column",py:2,px:3,boxShadow:"base",borderRadius:"6px",mb:2,children:[e.jsx(M,{as:"h4",mb:1,size:"sm",color:"gray.700",textAlign:"center",children:"Presensi"}),e.jsx(E,{children:e.jsxs(O,{size:"sm",variant:"simple",children:[e.jsx(C,{children:"Tabel Persentase Presensi Pegawai"}),e.jsx(A,{children:e.jsxs(l,{children:[e.jsx(x,{children:"Jenis"}),e.jsx(x,{isNumeric:!0,children:"Persentase"})]})}),e.jsx(I,{children:q?e.jsx(l,{children:e.jsx(a,{colSpan:2,children:e.jsx(ie,{})})}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsx(a,{children:"Kehadiran"}),e.jsx(a,{isNumeric:!0,children:g!==null?g.hadir+"%":""})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Keterlambatan"}),e.jsx(a,{isNumeric:!0,children:g!==null?g.terlambat+"%":""})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Ketidakhadiran"}),e.jsx(a,{isNumeric:!0,children:g!==null?g.tidak_hadir+"%":""})]})]})})]})})]}),e.jsxs(h,{direction:"column",py:2,px:3,boxShadow:"base",borderRadius:"6px",children:[e.jsx(M,{as:"h4",mb:1,size:"sm",color:"gray.700",textAlign:"center",children:"Ketercapaian Task"}),e.jsx(E,{children:e.jsxs(O,{size:"sm",variant:"simple",children:[e.jsx(C,{children:"Task Pegawai"}),e.jsx(A,{children:e.jsxs(l,{children:[e.jsx(x,{children:"Jenis"}),e.jsx(x,{isNumeric:!0,children:"Persentase"})]})}),e.jsx(I,{children:N===null?e.jsx(l,{children:e.jsx(a,{colSpan:2,children:e.jsxs(h,{width:"100%",justifyContent:"center",mb:2,alignItems:"center",color:"gray.600",children:["--  "," ",e.jsx(ee,{color:"gray.600",size:"sm"}),"  --"]})})}):e.jsx(e.Fragment,{children:N.map((o,r)=>e.jsxs(l,{children:[e.jsx(a,{children:o.title}),e.jsxs(a,{isNumeric:!0,children:[o.percentage_counted.toFixed(2),"%"]})]},r))})}),e.jsx(ae,{children:e.jsxs(l,{bg:"gray.200",children:[e.jsx(x,{fontSize:"12px",children:"Rata-rata Ketercapaian"}),e.jsx(x,{fontSize:"12px",isNumeric:!0,children:N===null?"-":J+"%"})]})})]})})]})]}),e.jsxs(h,{direction:"column",flexGrow:"1",pl:4,children:[e.jsx(M,{mb:2,as:"h3",size:"md",children:"Status Pencapaian"}),e.jsx(se,{height:"100%",children:e.jsx(ne,{children:e.jsx(E,{children:e.jsxs(O,{size:"sm",variant:"simple",children:[e.jsx(C,{children:"Kategori Pencapaian KPI"}),e.jsx(A,{children:e.jsxs(l,{children:[e.jsx(x,{children:"Total Persentase"}),e.jsx(x,{isNumeric:!0,children:"Keterangan"})]})}),e.jsxs(I,{children:[e.jsxs(l,{bg:t===1?"green.700":"white",color:t===1?"white":"black",fontWeight:t===1?"bold":"normal",children:[e.jsxs(a,{children:[s[0].valueTo,"%-",s[0].valueFrom,"%"]}),e.jsx(a,{isNumeric:!0,children:s[0].title})]}),e.jsxs(l,{bg:t===2?"green.400":"white",color:t===2?"white":"black",fontWeight:t===2?"bold":"normal",children:[e.jsxs(a,{children:[s[1].valueTo,"%-",s[1].valueFrom,"%"]}),e.jsx(a,{isNumeric:!0,children:s[1].title})]}),e.jsxs(l,{bg:t===3?"orange.400":"white",color:t===3?"white":"black",fontWeight:t===3?"bold":"normal",children:[e.jsxs(a,{children:[s[2].valueTo,"%-",s[2].valueFrom,"%"]}),e.jsx(a,{isNumeric:!0,children:s[2].title})]}),e.jsxs(l,{bg:t===4?"red.400":"white",color:t===4?"white":"black",fontWeight:t===4?"bold":"normal",children:[e.jsxs(a,{children:[s[3].valueTo,"%-",s[3].valueFrom,"%"]}),e.jsx(a,{isNumeric:!0,children:s[3].title})]}),e.jsxs(l,{bg:t===5?"red.700":"white",color:t===5?"white":"black",fontWeight:t===5?"bold":"normal",children:[e.jsxs(a,{children:[s[4].valueTo,"%-",s[4].valueFrom,"%"]}),e.jsx(a,{isNumeric:!0,children:s[4].title})]})]})]})})})})]})]}),e.jsxs(h,{direction:"column",boxShadow:"base",mt:3,mb:3,px:3,py:3,bg:"green.100",borderRadius:"6px",alignItems:"center",justifyContent:"center",children:[e.jsxs(K,{width:"100%",mb:2,borderBottom:"2px",borderColor:"green.200",textAlign:"center",pb:2,fontWeight:"bold",children:["Persentase KPI:"," ",e.jsxs("span",{style:{fontWeight:"bold"},children:[F,"%"]})]}),e.jsxs(K,{fontWeight:"bold",children:["Nominal KPI Diterima:"," ",e.jsxs("span",{style:{fontWeight:"bold"},children:[B(L),",-"]})]})]})]})]})};export{ke as default};
