import{r as t,j as s,Y as A,y as K}from"./app-D-tiouko.js";import"./index.es-B8LRRmtI.js";import{y as Q}from"./index-BLEpFBfl.js";import{P as q,a as D}from"./PrimaryLoadingPlain-G9aGfZMa.js";import O from"./GuestHead-B7kE2HFQ.js";import W from"./BodyGuest-AN81T7Be.js";import Y from"./Footer-DqQhwzY3.js";import H from"./LoginBG-yoQ5q5Jg.js";import{F as J}from"./flex-B3u7Yjy3.js";import{B as M}from"./box-B4e4n_hZ.js";import"./index-CVfZXKi4.js";import"./heading-C-TpxM4d.js";import"./use-form-control-CwhKtZKy.js";import"./use-merge-refs-BFB3bSvN.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./form-label-B_0GP0Fr.js";import"./button-b_OXMfTF.js";import"./text-B41xTBOs.js";import"./stack-CNRkET4p.js";import"./responsive-DU-uVjaz.js";import"./children-CpoAimTO.js";import"./index-B2KZh1O9.js";import"./QrCodeDisplay-BDMojwhc.js";import"./select-BZQ40FW4.js";import"./button-group-2LTAmXy9.js";import"./textarea-C6m91mAu.js";import"./use-boolean-D4otBCAS.js";const Bt=({personDataGuest:a,unitsGuest:m,currentHost:o="https://app.unusida.ac.id/sku",filterUnitId:i=null})=>{const[S,g]=t.useState(0),[b,B]=t.useState(!0),[C,h]=t.useState(!1),[E,U]=t.useState(null),[r,d]=t.useState(null),[x,y]=t.useState(""),[c,n]=t.useState(""),[V,v]=t.useState(!0),[I,L]=t.useState(!1),[_,p]=t.useState("https://app.unusida.ac.id/sku"),[u,F]=t.useState(null),[P,j]=t.useState("Pilih unit dulu..."),R=()=>{let e="",f=u.filter(l=>l.id==r);try{e=`${o}/sku/unit/${f[0].alias}`}catch{e=`${o}/sku`}p(e)};function T(e){e.preventDefault(),c.length>=1&&(K.post("/sku/send-survey",{nama_id:c,kode_unit_id:r,level_survey_id:S,komentar:x}),n(""),d(null),y(""),g(0),L(!0),setTimeout(()=>{L(!1)},2e3))}const $=e=>{n(0),j(e.target.options[e.target.selectedIndex].text.toLowerCase()),d(e.target.value)},G=e=>{B(e),setTimeout(()=>{v(!1)},1500)},N=e=>{g(e)},z=t.useCallback(()=>{a&&U(a)},[a]);return t.useEffect(()=>{z()},[a]),t.useEffect(()=>{let e=null;m===void 0?h(!1):(h(!0),e=m.sort((f,l)=>{const k=String(f.nama_unit).charAt(0).toLowerCase(),w=String(l.nama_unit).charAt(0).toLowerCase();return k>w?1:k<w?-1:0}),F(e))},[m]),t.useEffect(()=>{i!==null&&(n(0),j(i[1]),d(parseInt(i[0])),p(`${o}/sku/unit/${i[2]}`))},[i]),t.useEffect(()=>{u!==null&&R()},[r,u]),t.useEffect(()=>{p(o+"/sku")},[o]),t.useEffect(()=>{v(!0)},[]),s.jsxs(s.Fragment,{children:[s.jsx(A,{children:s.jsx("title",{children:"Survei Kepuasan Unit"})}),s.jsxs(J,{position:"relative",width:"100vw",boxSizing:"border-box",minHeight:"100vh",direction:"column",bg:"#97c4ab",children:[s.jsx(H,{setIsBgLoaded:G,showBlur:!1}),s.jsx(M,{width:"100%",height:"100%",position:"absolute",left:"0px",zIndex:2,className:"bg-glass-5"}),s.jsx(O,{}),C?s.jsx(W,{qrCodeUrl:_,handleSubmit:T,unitsGuest:u,changeUnit:$,namaId:c,setNamaId:n,tempData:E,selectedSatisfyLevel:S,changeSelectedSatisfyLevel:N,setKomentar:y,komentar:x,selectedUnit:r,selectedUnitName:P}):"",s.jsx(Y,{})]}),s.jsx(q,{isHidden:b,showCopyRight:!0}),s.jsx(D,{isHidden:!I,customIcon:Q,isBounce:!0,showWarning:!1,hText:"Berhasil dikirim, tunggu...",showCopyRight:!0})]})};export{Bt as default};
