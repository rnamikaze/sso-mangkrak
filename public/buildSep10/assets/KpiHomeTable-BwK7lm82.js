import{r as p,j as e}from"./app-BRf5toWG.js";import{F as S}from"./index.es-BtTm-lQZ.js";import{aB as G,C as X,f as A,a_ as J}from"./index-BhJBT7_l.js";import{d as U}from"./debounce-Dre-dTZu.js";import{b as q,a as Q,s as y}from"./DateTools-DazUeWyn.js";import{F as r}from"./flex-DKwlgr-O.js";import{H as Y}from"./heading-D-CUm6-X.js";import{S as C}from"./select-DiJvIInU.js";import{I as Z}from"./input-group-e4ltzjDZ.js";import{I as ee}from"./input-DQBKHLse.js";import{a as te}from"./input-addon-fzb-K6CY.js";import{B as F}from"./button-Dm7yfw5z.js";import{T as re,a as ae,b as g,c as ne}from"./thead-jL1IYPIh.js";import{a as T,T as ie}from"./tr-D0gvPZIT.js";import{T as u}from"./td-6W2IKI22.js";import{u as se}from"./use-boolean-DWsdq_aC.js";const k=[{id:1,title:e.jsx(r,{px:1,bg:"green.600",color:"white",children:"Sangat Baik"}),valueTo:101,valueFrom:91},{id:2,title:e.jsx(r,{px:1,bg:"green.400",color:"white",children:"Baik"}),valueTo:90,valueFrom:81},{id:3,title:e.jsx(r,{px:1,bg:"orange.400",color:"white",children:"Cukup Baik"}),valueTo:80,valueFrom:71},{id:4,title:e.jsx(r,{px:1,bg:"red.400",color:"white",children:"Kurang Baik"}),valueTo:70,valueFrom:61},{id:5,title:e.jsx(r,{px:1,bg:"red.600",color:"white",children:"Sangat Tidak Baik"}),valueTo:60,valueFrom:0}],z=({row:a,showKpiPerUser:c,index:s,changeSelectedMenu:o})=>{const[d,h]=se(!1),[l,v]=p.useState("Cukup Baik"),m=()=>{const x=parseInt(a.kpiValue);for(let n=0;n<k.length;n++)x<=parseInt(k[n].valueTo)&&x>=parseInt(k[n].valueFrom)&&v(k[n].title)};return p.useEffect(()=>{m()},[a]),e.jsxs(T,{color:d?"green.600":"2f2f2f",fontWeight:"normal",onMouseEnter:h.on,onMouseLeave:h.off,transform:d?"translateX(-5px)":"translateX(0px)",transition:"250ms ease-out",position:"relative",children:[e.jsx(u,{children:s+1}),e.jsx(u,{cursor:"pointer",onClick:()=>{c(a.id,a.fullname)},children:a.nik}),e.jsx(u,{cursor:"pointer",onClick:()=>{o(102,a.id)},whiteSpace:"wrap",children:a.fullname}),e.jsxs(u,{isNumeric:!0,children:[a.kpiValue,"%"]}),e.jsx(u,{isNumeric:!0,children:P(a.nominalFromKpi,2)}),e.jsx(u,{fontSize:"12px",whiteSpace:"wrap",children:l})]})},ye=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));function oe(a,c,s=300){const[o,d]=p.useState(""),[h,l]=p.useState(a),v=U(m=>{if(!m){l(a);return}const x=a.filter(n=>c.some(w=>{var f;return(f=n[w])==null?void 0:f.toString().toLowerCase().includes(m.toLowerCase())}));l(x)},s);return p.useEffect(()=>{v(o)},[o,a,c]),[o,d,h]}function P(a,c=0){let s=Number(a).toFixed(c).split("."),o=s[0],d=s.length>1?s[1]:"",l="Rp"+o.replace(/\B(?=(\d{3})+(?!\d))/g,".");return c>0&&(l+=","+d),l}const le=({periodeStart:a,periodeEnd:c,showKpiPerUser:s,changeSelectedMenu:o,listTendik:d,setListTendik:h,listDosen:l,setListDosen:v,retrieveKpiDosenSummary:m,retrieveKpiSummary:x,isLoadingDataSummary:n,isLoadingDataDosenSummary:w,currentPeriod:f,setCurrentperiod:K,datePeriodeList:B,setDatePriodeList:D,datePeriodeSelected:E,setDatePeriodeSelected:N})=>{const[I,j]=p.useState([0,100]),[b,_]=p.useState("tendik"),H=t=>{const i=t.target.value;_(i)},$=()=>b==="tendik"?d||[]:l||[],[M,O,V]=oe($(),["fullname","nik"]),R=V.filter(t=>{const i=parseFloat(t.kpiValue)||0;return i>=I[0]&&i<=I[1]}),L=t=>{switch(parseInt(t.target.value)){case 0:j([0,100]);break;case 1:j([91,100]);break;case 2:j([81,90]);break;case 3:j([71,80]);break;case 4:j([61,70]);break;case 5:j([0,60]);break}},W=()=>{if(!f)return"periode-undefined";const t=y(f.value)[0],i=y(f.value)[1];return`${t}/${i}`};return p.useEffect(()=>{D(q("12/2024"))},[]),e.jsxs(r,{bg:"white",mt:2,mb:3,borderRadius:"6px",direction:"column",px:4,py:3,children:[e.jsx(Y,{as:"h3",pb:1,mb:1,size:"md",borderBottom:"2px",borderColor:"gray.200",color:"gray.700",children:"Tabel Data KPI"}),e.jsxs(r,{mb:4,width:"100%",direction:["column","column","row","row"],gap:1,wrap:"wrap",children:[e.jsxs(r,{direction:"column",children:[e.jsx(r,{fontSize:"13px",color:"gray.600",children:"Jenis Pegawai"}),e.jsxs(C,{onChange:H,size:"sm",value:b,children:[e.jsx("option",{value:"dosen",children:"Dosen"}),e.jsx("option",{value:"tendik",children:"Tendik"})]})]}),e.jsxs(r,{direction:"column",children:[e.jsx(r,{fontSize:"13px",color:"gray.600",children:"Rating"}),e.jsxs(C,{onChange:L,size:"sm",children:[e.jsx("option",{value:"1",children:"100%-91%"}),e.jsx("option",{value:"2",children:"90%-81%"}),e.jsx("option",{value:"3",children:"80%-71%"}),e.jsx("option",{value:"4",children:"70%-61%"}),e.jsx("option",{value:"5",children:"60%-0%"}),e.jsx("option",{value:"0",selected:!0,children:"Semua"})]})]}),e.jsxs(r,{direction:"column",children:[e.jsx(r,{fontSize:"13px",color:"gray.600",children:"Cari"}),e.jsxs(Z,{size:"sm",children:[e.jsx(ee,{placeholder:"Nama / NIK",value:M,onChange:t=>{O(t.target.value)},size:"sm"}),e.jsx(te,{children:e.jsx(S,{icon:G})})]})]}),e.jsxs(r,{minWidth:"200px",direction:"column",children:[e.jsx(r,{fontSize:"13px",color:"gray.600",children:"Ganti Periode"}),e.jsxs(C,{minWidth:"200px",bg:"white",size:"sm",value:E,onChange:t=>{N(t.target.value),K(Q(new Date(y(t.target.value)[0])))},border:"1px",borderColor:"gray.300",children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih Periode"}),B.map(t=>e.jsx("option",{value:t.value,children:t.title},t.id))]})]}),e.jsxs(F,{colorScheme:"blue",borderRadius:"2px",size:"sm",onClick:()=>{b==="tendik"?x():m()},isDisabled:n||w,alignSelf:"flex-end",children:["Segarkan ",e.jsx(S,{spin:n,icon:X})]})]}),e.jsx(re,{width:"100%",children:e.jsxs(ie,{variant:"striped",size:"sm",children:[e.jsx(ae,{children:e.jsxs(T,{children:[e.jsx(g,{width:"5%",children:"No."}),e.jsx(g,{width:"15%",children:"NIK"}),e.jsx(g,{width:"50%",wordBreak:"break-word",children:"Nama"}),e.jsxs(g,{width:"10%",whiteSpace:"wrap",children:["Rating",e.jsx("br",{}),"Kinerja"]}),e.jsxs(g,{width:"20%",whiteSpace:"wrap",children:["Nominal",e.jsx("br",{}),"KPI"]}),e.jsxs(g,{whiteSpace:"wrap",children:["Status",e.jsx("br",{}),"Pencapaian"]})]})}),e.jsx(ne,{children:n||w?e.jsx(T,{children:e.jsxs(u,{colSpan:6,children:[" ","Memuat Data"," ",e.jsx(S,{spin:!0,icon:A})]})}):R.length<1?e.jsx(T,{children:e.jsx(u,{colSpan:6,children:"Kosong"})}):R.map((t,i)=>e.jsx(z,{changeSelectedMenu:o,row:t,showKpiPerUser:s,index:i},`${i}${t.nik}`))})]})}),e.jsxs(r,{mt:3,justifyContent:"flex-end",direction:["column","column","row","row"],bg:"gray.200",px:3,py:2,borderRadius:"6px",alignItems:"center",children:[e.jsxs(r,{mb:[1,1,0,0],mr:[0,0,2,2],fontWeight:"bold",justifyContent:"flex-end",children:["Data Ringkasan KPI ",e.jsx("span",{style:{textTransform:"capitalize"},children:b})]}),e.jsx(r,{justifyContent:"flex-end",children:e.jsx("a",{href:`/sik/get-kpi-summary/${b}/${W()}`,rel:"noreferrer",target:"_blank",children:e.jsxs(F,{size:"sm",colorScheme:"whatsapp",variant:"ghost",children:["Unduh EXCEL  ",e.jsx(S,{icon:J})]})})})]})]})},Ce=Object.freeze(Object.defineProperty({__proto__:null,default:le,formatRupiah:P},Symbol.toStringTag,{value:"Module"}));export{ye as H,le as K,Ce as a};
