import{r as a,j as e,S as P,b as U,y as H}from"./app-BRf5toWG.js";import{F as y}from"./index.es-BtTm-lQZ.js";import{Y as G,d as L,e as _,Z as V,_ as Y}from"./index-BhJBT7_l.js";import{F as x}from"./flex-DKwlgr-O.js";import{F as J}from"./use-form-control-DHIsxYm4.js";import{I as M}from"./input-DQBKHLse.js";import{B as k}from"./button-Dm7yfw5z.js";import{B as O}from"./button-group-CG4rv_Eb.js";import{T as X,a as Z,b as d,c as K}from"./thead-jL1IYPIh.js";import{T as $,a as C}from"./tr-D0gvPZIT.js";import{T as o}from"./td-6W2IKI22.js";import"./use-merge-refs-CHqHjQ4S.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";const pe=({personData:t,units:l,changeSelectedMenu:S,mainTheme:p,refreshToken:I,showToast:A})=>{const[c,h]=a.useState(null),[f,B]=a.useState(window.innerHeight),g=50,[s,z]=a.useState(1),u=(s-1)*g,m=u+g,[b,v]=a.useState(""),[n,N]=a.useState([]),R=i=>{const r=i.target.value.toLowerCase();if(v(r),r.length>0){const j=t.filter(w=>Object.values(w).some(E=>String(E).toLocaleLowerCase().includes(r)));N(j),F(j),T(1)}r.length<1&&(h(t),F())},W=(i,r)=>{const j=c.map(w=>w.id===i?{...w,active:r}:w);h(j)},T=i=>{z(i)},D=()=>{let i=null,r=!0;try{i=c.length,r=!1}catch{r=!0}return r},F=a.useCallback((i=null)=>{i===null?t&&(b.length<1?h(t.slice(u,m)):h(n.slice(u,m))):h(i.slice(u,m))},[t,s]);return a.useEffect(()=>{F()},[t,s]),e.jsxs(x,{position:"relative",direction:"column",flexGrow:1,py:3,overflow:"scroll",className:"hide-scrbar",children:[e.jsxs(x,{direction:"column",zIndex:20,bg:p.boxBg,children:[e.jsx(x,{children:e.jsx(J,{children:e.jsx(M,{value:b,onChange:R,type:"text",placeholder:"Cari NIK/Nama/Unit",size:"sm",borderRadius:"6px"})})}),e.jsxs(x,{justifyContent:"space-between",mb:2,mt:"20px",children:[e.jsxs(k,{onClick:()=>{S(101)},size:"sm",colorScheme:p.btnScheme.primary,children:[e.jsx(y,{icon:G})," ","  Tambah"]}),e.jsxs(O,{width:["max-content","max-content","max-content"],colorScheme:"black",display:"flex",children:[e.jsxs(k,{bg:"gray.500",flexGrow:1,size:"sm",onClick:()=>{s!==1&&T(s-1)},children:[e.jsx(y,{icon:L}),"  Mndr"]}),e.jsx(k,{bg:"gray.500",size:"sm",children:s}),e.jsxs(k,{bg:"gray.500",flexGrow:1,size:"sm",onClick:()=>{m<(n.length<1?t.length:n.length)&&T(s+1)},children:["Maju  ",e.jsx(y,{icon:_})]})]})]})]}),D()?e.jsx(x,{alignItems:"center",justifyContent:"center",children:e.jsx(P,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"green.500",size:"xl"})}):e.jsx(e.Fragment,{children:e.jsx(X,{maxHeight:`${f-200}px`,overflowY:"scroll",overflowX:"auto",position:"relative",className:"Flipped",children:e.jsxs($,{size:"sm",variant:"simple",colorScheme:"gray",className:"Content",position:"relative",children:[e.jsx(Z,{position:"relative",children:e.jsxs(C,{textAlign:"center",position:"sticky",top:"0px",bg:p.mainBg,zIndex:10,children:[e.jsx(d,{colSpan:2,children:"#"}),e.jsx(d,{width:"100px",children:"NIK"}),e.jsx(d,{children:"Nama"}),e.jsx(d,{children:"Unit"}),e.jsx(d,{children:"Kelamin"}),e.jsx(d,{children:"Status"}),e.jsx(d,{width:"100px",children:"Telepon"}),e.jsx(d,{children:"Umur"})]})}),c===null||c[0]===void 0?e.jsx(K,{children:e.jsx(C,{children:e.jsx(o,{colSpan:7,children:"Kosong"})})}):e.jsx(e.Fragment,{children:e.jsxs(K,{children:[c.length<1?e.jsx(C,{children:e.jsx(o,{textAlign:"center",colSpan:7,children:"Kosong"})}):"",c.map((i,r)=>e.jsx(q,{updateDisableAcc:W,refreshToken:I,itemsPerPage:g,changeSelectedMenu:S,table:i,index:r,mainTheme:p,currentPage:s}))]})})]})})})]})},q=({table:t,mainTheme:l,index:S,currentPage:p,changeSelectedMenu:I,itemsPerPage:A=15,refreshToken:c,updateDisableAcc:h})=>{const[f,B]=a.useState(!1),[g,s]=a.useState(!1);function z(){s(!0),U.post("/sik/disable-user",{id:t.id,active:parseInt(t.active)}).then(function(n){n.data.success&&(h(t.id,n.data.value),s(!1))}).catch(function(n){})}function u(){B(n=>!n)}function m(){H.post("/sik/delete-user",{id:t.id,active:parseInt(t.active),master_id:t.master_id,nik:t.nik})}const b=n=>{switch(n){case 1:return"Tendik";case 2:return"Dosen";case 3:return"Dosen & Tendik";case 4:return"Dosen & Jados";default:return"Unknown "+n}},v=a.useCallback(()=>{s(!1)},[c]);return a.useEffect(()=>{v()},[v]),e.jsxs(e.Fragment,{children:[e.jsxs(C,{position:"relative",overflow:"visible",style:{color:f?l.primary:"inherit",transition:"250ms ease-out"},zIndex:5,children:[e.jsx(o,{cursor:"pointer",maxWidth:"20px",style:{maxWidth:"20px"},onClick:u,children:e.jsx(y,{style:{transform:f?"rotate(90deg)":"rotate(0deg)",transition:"250ms ease-out"},icon:V})}),e.jsxs(o,{maxWidth:"40px",style:{maxWidth:"40px"},fontWeight:"bold",pr:1,children:[(p-1)*A+S+1,"."]}),e.jsx(o,{width:"15%",children:t.nik}),e.jsx(o,{children:t.fullname}),e.jsx(o,{width:"20%",textTransform:"capitalize",children:t.unit_name}),e.jsx(o,{width:"10%",textTransform:"capitalize",children:t.kelamin===1?"laki-laki":"perempuan"}),e.jsx(o,{width:"15%",textTransform:"capitalize",children:b(parseInt(t.status))}),e.jsx(o,{width:"10%",children:t.telepon}),e.jsxs(o,{textAlign:"center",children:[t.age," Tahun"]})]}),e.jsx(C,{display:f?"":"none",children:e.jsxs(o,{colSpan:7,children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"bold",alignSelf:"center",marginRight:"10px"},children:"Action"})," ","  ",e.jsx(x,{position:"relative",top:"2px",display:"inline-flex",width:"25px",height:"25px",bg:l.btnScheme.primaryC,color:l.boxBg,alignItems:"center",justifyContent:"center",borderRadius:"6px",fontSize:"13px",cursor:"pointer",onClick:()=>{I(102,t.id)},children:e.jsx(y,{icon:Y})}),"   ",e.jsxs(x,{display:"inline-flex",width:"max-content",height:"25px",position:"relative",bg:parseInt(t.active)===1?l.btnScheme.primaryC:l.btnScheme.secondaryC,color:l.boxBg,alignItems:"center",justifyContent:"center",fontWeight:"bold",borderRadius:"6px",fontSize:"13px",cursor:"pointer",px:2,mr:2,onClick:z,children:[parseInt(t.active)===1?"Disable":"Enable",g?e.jsxs(e.Fragment,{children:["  "," ",e.jsx(P,{color:"white",size:"xs"})]}):""]}),parseInt(t.active)===1?"":e.jsx(x,{display:"inline-flex",width:"max-content",height:"25px",bg:l.btnScheme.danger,color:l.boxBg,alignItems:"center",justifyContent:"center",fontWeight:"bold",borderRadius:"6px",fontSize:"13px",cursor:"pointer",px:2,onClick:m,children:"Hapus"})]})})]})};export{pe as default};
