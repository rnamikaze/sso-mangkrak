import{r as i,j as e,Y as Pe,n as Fe,S as A,y as Ke}from"./app-BRf5toWG.js";import{F as Oe}from"./index.es-BtTm-lQZ.js";import{ac as We,o as Ge,a1 as H,aV as Y,ah as Re,aX as R,ak as D,al as V,am as De,an as Ve,aY as Je}from"./index-BhJBT7_l.js";import He from"./MenuItem-CkoBRSAI.js";/* empty css              */import Ye from"./MainSection-CXSjBI6x.js";import Xe from"./NavHead-C-LJxOdP.js";import Qe from"./NotAllowed-C0GE-EOL.js";import{M as s}from"./MainTheme-Bu5uiptW.js";import qe from"./NewUserProfile-Dg8AnYyR.js";import Ze from"./SsoSettings-CUcdHsBL.js";import $e from"./EditeProfile-DZlyySxP.js";/* empty css                  *//* empty css                     */import et from"./MainCp-C7SFE4JE.js";/* empty css                          *//* empty css                       */import tt from"./SsoHomeAnimation-Cr_-P8-5.js";import ot from"./ForbiddenPopUp-AjLJskeg.js";import{u as it}from"./use-toast-Mdy3JCFw.js";import{F as n}from"./flex-DKwlgr-O.js";import{T}from"./text-CdRbiz2-.js";import"./use-boolean-DWsdq_aC.js";import"./AppItem-DMLQt1xO.js";import"./grid-item-D_zDAE-n.js";import"./responsive-CKTKN8qq.js";import"./image-UHZF2dBf.js";import"./use-image-CxB9Ef0I.js";import"./MiniNavHead-fscZ4D9B.js";import"./use-form-control-DHIsxYm4.js";import"./use-merge-refs-CHqHjQ4S.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./form-label-DWu6OXKn.js";import"./switch-DpbwZCoL.js";import"./input-DQBKHLse.js";import"./grid-CBSILEtc.js";import"./button-Dm7yfw5z.js";import"./index-B2KZh1O9.js";import"./index-BV8y1BTx.js";import"./FormDisplay-FLa6-xeb.js";import"./index-DHNuJBZz.js";import"./heading-D-CUm6-X.js";import"./badge-BWvN93--.js";import"./SettingItem-BEctLSdc.js";import"./HakAkses-C9JDB9qV.js";import"./TablePageAkses-iPuc81uT.js";import"./TableTr-BjjW-Pe_.js";import"./tr-D0gvPZIT.js";import"./td-6W2IKI22.js";import"./button-group-CG4rv_Eb.js";import"./thead-jL1IYPIh.js";import"./AppSelection-bhtDNvHd.js";import"./LoginLoger-D1B2D2BN.js";import"./TablePageLoger-BFRYyd5M.js";import"./TableTrLoger-DLuxbY-n.js";import"./ResetUserPass-BSWgAWzD.js";import"./SelectInput-5OQyStZD.js";import"./select-DiJvIInU.js";import"./TextInput-DFUIMgRm.js";import"./SelectInputNamco-D-bo0LW4.js";import"./SelectInputProv-CwI3VUei.js";import"./TextInputExtra-v7hewa_N.js";import"./UpImgProfile-DFAU_9S6.js";import"./circular-progress-By2wHYQi.js";import"./circular-progress-label-CCSojFN_.js";import"./TextInputExtraValidation-B5sH6EWE.js";import"./radio-D7DRAibN.js";import"./stack-BP7DhAec.js";import"./children-BMP1hdK-.js";const st=new Date,nt=st.getFullYear(),rt=[{id:0,title:"Beranda",icon:H},{id:1,title:"Profil",icon:Y}],at=[{id:0,title:"Beranda",icon:H},{id:1,title:"Profil",icon:Y},{id:2,title:"Pengaturan",icon:Re}],J=[{id:0,title:"SKU",description:"Isi Survey Kepuasan Unit",icon:R,url:"/sku"},{id:1,title:"SKPMB",description:"Isi Survey Kepuasan PMB",icon:R,url:"/spmb"}],_=[{id:0,dbid:"sku",title:"Admin SKU",description:"Survey Kepuasan Unit",useImageAsIcon:!1,image_url:null,icon:D,url:"/sku/home"},{id:1,dbid:"spmb",title:"Admin SKPMB",description:"Survey Kepuasan PMB",useImageAsIcon:!1,image_url:null,icon:D,url:"/spmb/dashboard"},{id:7,dbid:"usl",title:"Link Shortener",description:"Pendekin URL (Legacy)",useImageAsIcon:!0,image_url:"https://storage.unusida.id/storage/logo/logo_unu_links_alt_200x200.png",icon:V,url:"/usl/admin/dashboard"},{id:4,dbid:"sik",title:"SIMPEG",description:"Sistem Informasi Kepegawaian",useImageAsIcon:!0,image_url:"https://storage.unusida.id/storage/images/simpeg/icon/logo_simpeg_icon.svg",icon:De,url:"/sik/dashboard"},{id:5,dbid:"sipeka",title:"SIPEKA",description:"Sistem Pengajuan Keuangan",useImageAsIcon:!0,image_url:"https://storage.unusida.id/storage/images/sipeka/icon/sipeka_icon_small_white.svg",icon:Ve,url:"/sipeka"},{id:6,dbid:"4payroll",title:"4Payroll",description:"Kirim Slip Gaji ke Email",useImageAsIcon:!1,image_url:null,icon:Je,url:"/4payroll",pass_userlevel:!0,unit_exclusive_id:18},{id:3,dbid:"usl",title:"Pendekin",description:"Link Shortener dengan QR Code (Test)",useImageAsIcon:!0,image_url:"https://storage.unusida.id/storage/logo/logo_unu_links_alt_200x200.png",icon:V,url:"/pendekin"}],Ao=({userAccount:a,notAllowedAlert:g=!1,userData:b=null,allUserList:X=null,aksesSelectedUser:Q=null,refreshToken:k="ka78s",showToastParam:p=[!1,"success","Berhasil"],unitKerja:q=null,jabatanFun:Z=null,jabatanStr:$=null,fakultas:ee=null,prodi:te=null,list_provinsi:oe=null,selectedDataPegawai:M=null,list_kabupaten:ie=null,list_kabupaten2:se=null,list_kecamatan:ne=null,list_desa:re=null,list_kecamatan2:ae=null,list_desa2:le=null,allowedApp:S})=>{const[N,me]=i.useState(0),[o,w]=i.useState(0),[ce,L]=i.useState(!1),[z,E]=i.useState(J),[U,B]=i.useState(_),[pe,de]=i.useState(""),[ue,j]=i.useState(!1),[he,P]=i.useState(g),[F,K]=i.useState(!1),[m,fe]=i.useState({theme:0,newTabMode:!1}),[xe,ge]=i.useState([]),[be,Se]=i.useState(!1),[I,we]=i.useState([]),[je,lt]=i.useState(a[0].username==="superadmin"?at:rt),Ie=it(),d="savedVariable",[ye,ve]=i.useState(!1),c=(t="success",r="Peringatan",l=7e3)=>{Ie({title:r,status:t,duration:l,isClosable:!0})},u=()=>{j(!0)},Ce=()=>{j(!1)},Ae=()=>{P(!1)},Te=t=>{const r=t.target.value,l=U.filter(v=>{const C=r.toLowerCase();return v.title.toLowerCase().includes(C)}),Ue=z.filter(v=>{const C=r.toLowerCase();return v.title.toLowerCase().includes(C)});r.length<1?(E(J),B(_)):(B(l),E(Ue)),de(r)},_e=()=>{let t=m;o===0?(t.theme=1,w(1)):(t.theme=0,w(0)),localStorage.setItem(d,JSON.stringify(t))},h=t=>{t===1&&Ke.post("/get-user-profile"),me(t),j(!1)},ke=()=>{if(he)return e.jsx(Qe,{hideNotAllowed:Ae,showSidebar:u,colorTheme:s[o]});switch(N){case 0:return e.jsx(Ye,{userAccount:a,newTabMode:F,toggleNewTabMode:Me,selectedTheme:o,showSidebar:u,colorTheme:s[o],appItem1:z,appItem2:U,searchApp:pe,handleSearch:Te,toggleSsoAnimate:W,isAnimate:O,allowedApp:xe,handleNoAccessAlert:G,determineSuperadmin:Ee,userData:b});case 1:return e.jsx(e.Fragment,{children:b===null?e.jsx(n,{alignItems:"center",justifyContent:"center",width:"100%",children:e.jsx(A,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"green.500",size:"xl"})}):e.jsx(qe,{changeSelectedMenu:h,selectedTheme:o,userData:b,appItem2:_,userAccount:a,colorTheme:s[o],showSidebar:u})});case 2:return e.jsx(Ze,{aksesSelectedUser:Q,allUserList:X,showSidebar:u,colorTheme:s[o],showToast:c});case 3:return e.jsx(e.Fragment,{children:M===null?e.jsx(n,{alignItems:"center",justifyContent:"center",width:"100%",children:e.jsx(A,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"green.500",size:"xl"})}):e.jsx($e,{changeSelectedMenu:h,unitKerja:q,jabatanFun:Z,jabatanStr:$,fakultas:ee,prodi:te,showToast:c,list_provinsi:oe,list_kabupaten:ie,list_kabupaten2:se,list_kecamatan:ne,list_desa:re,list_kecamatan2:ae,list_desa2:le,mainTheme:s[o],selectedDataPegawai:M})});case 4:return e.jsx(et,{showToast:c,colorTheme:s[o],changeSelectedMenu:h})}},Me=()=>{let t=!F,r=m;r.newTabMode=t,K(l=>!l),localStorage.setItem(d,JSON.stringify(r))},Ne=i.useCallback(()=>{[a].some(r=>r===null)?L(!1):L(!0)},[a]),Le=i.useCallback(()=>{p[0]&&c(p[1],p[2])},[k,c]);i.useEffect(()=>{Ne()},[a]),i.useEffect(()=>{P(g)},[g]),i.useEffect(()=>{Le()},[p,k]);const[O,y]=i.useState(!0),f="sso_home_animation",W=()=>{let t=null;y(r=>(t=!r,!r)),localStorage.setItem(f,JSON.stringify(t))};i.useEffect(()=>{S&&ge(S)},[S]),i.useEffect(()=>{const t=localStorage.getItem(d),r={theme:0,newTabMode:!1};t?fe(JSON.parse(t)):localStorage.setItem(d,JSON.stringify(r)),axios.post("/per-user-loger",{by:"@rnamikaze"}).then(function(l){setTimeout(()=>{we(l.data.loger),ve(!0)},[1500])}).catch(function(l){}),localStorage.getItem(f)===null?(localStorage.setItem(f,JSON.stringify(!0)),y(!0)):y(JSON.parse(localStorage.getItem(f)))},[]);const[x,ze]=i.useState([!1,We,"Web App 1",null]),G=t=>{ze(t)};i.useEffect(()=>{K(m.newTabMode),w(m.theme)},[m]);const Ee=i.useCallback(()=>a?a[0].username==="superadmin":!1,[a]);return i.useEffect(()=>{const t=()=>{},r=()=>{};return window.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",r),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",r)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(Pe,{children:e.jsx("title",{children:"UNUSIDA Portal"})}),ce?e.jsxs(n,{bg:s[o].boxBg,position:"relative",width:"100vw",minHeight:"100vh",height:["max-content","max-content","100vh"],direction:["column","column","row"],className:"horizontal-scroll",overflow:["auto","auto","hidden","hidden"],children:[x[0]?e.jsx(ot,{closeAction:G,icon:x[1],appTitle:x[2],imgUrl:x[3]}):"",be?e.jsx(n,{width:"100vw",height:"100vh",zIndex:100,position:"absolute",bg:"#000000de",justifyContent:"center",alignItems:"center",children:e.jsx("div",{children:e.jsx("div",{id:"login-loader"})})}):"",e.jsx(Xe,{setIsLoading:Se,userAccount:a,colorTheme:s[o],toggleDarkMode:_e,selectedTheme:o}),e.jsxs(n,{position:["absolute","absolute","relative"],left:["-110vw","-110vw","0px"],transform:ue?"translateX(110vw)":"translateX(0px)",width:["100%","100%","250px"],minWidth:["100%","100%","250px"],direction:"column",height:"100%",bg:[s[o].mainBg,s[o].mainBg,"transparent","transparent"],zIndex:[19,19,0],boxShadow:["base","base","none"],mt:"90px",transition:"500ms ease-out transform",className:"horizontal-scroll",children:[e.jsx(n,{color:"white",fontWeight:"bold",px:3,py:1,bg:s[o].bgLinearCoolGreenRvr,mb:4,justifyContent:"center",letterSpacing:"2px",boxShadow:"base",fontSize:"18px",children:"MENU"}),e.jsxs(n,{alignSelf:"center",height:"30px",alignItems:"center",bg:s[o].boxBg,px:3,py:1,borderRadius:"6px",boxShadow:"base",mb:2,color:s[o].text,onClick:Ce,display:["flex","flex","none"],cursor:"pointer",children:[e.jsx(Oe,{icon:Ge})," ",e.jsx(T,{ml:2,children:"Tutup"})]}),je.map(t=>e.jsx(He,{colorTheme:s[o],selectedMenu:N,item:t,changeSelectedMenu:h},t.id))]}),e.jsxs(n,{flexGrow:1,overflow:["visible","visible","auto"],direction:"column",mx:2,className:"horizontal-scroll",children:[e.jsx(tt,{toggleSsoAnimate:W,isAnimate:O}),ke()]}),e.jsxs(n,{display:["flex","flex","none","flex"],direction:"column",width:["100%","100%","250px"],minWidth:["100%","100%","250px"],mt:[0,0,"80px"],pt:"15px",mb:["30px","30px",0],children:[e.jsx(n,{color:"white",fontWeight:"bold",px:3,py:1,bg:s[o].bgLinearCoolGreen2,mb:4,justifyContent:"center",boxShadow:"base",fontSize:"18px",letterSpacing:"2px",children:"INFO"}),e.jsxs(n,{mb:3,bg:s[o].boxBg,height:"max-content",borderRadius:"10px",px:"25px",py:"15px",fontSize:"12px",color:s[o].heading,direction:"column",borderTopLeftRadius:"25px",children:[e.jsxs(n,{fontWeight:"bold",fontSize:"sm",textTransform:"uppercase",mb:2,direction:"column",children:[e.jsx(n,{children:"Riwayat Login"}),e.jsx(n,{style:{fontSize:"10px"},justifyContent:"flex-end",children:"5 Catatan Terbaru"})]}),I.length<1?e.jsx(n,{justifyContent:"center",children:e.jsx("div",{id:"dash-small-loader"})}):e.jsx(Fe.div,{initial:{height:"60px"},animate:ye?{height:I.length*42+"px"}:{height:"60px"},transition:{duration:.5,type:"tween",stiffness:"120"},style:{overflow:"hidden"},children:I.map((t,r)=>e.jsx(e.Fragment,{children:e.jsxs(n,{my:1,justifyContent:"space-between",children:[e.jsxs(n,{width:"20px",justifyContent:"flex-start",fontSize:"13px",fontWeight:"bold",color:s[o].mainText,children:[r+1,"."]}),e.jsxs(n,{flexGrow:1,direction:"column",children:[e.jsx(n,{borderBottom:"1px",borderColor:"gray.200",justifyContent:"flex-end",color:s[o].mainText,fontWeight:"bold",children:t.formated_date}),e.jsxs(n,{justifyContent:"flex-end",fontSize:"12px",color:s[o].mainText,children:[t.device_name," - ",t.browser_name,e.jsx("br",{}),e.jsxs(n,{display:"inline-flex",alignItems:"self-end",style:{fontSize:"10px"},fontWeight:"bold",color:s[o].gray,ml:1,children:["[",t.ip_log,"]"]})]})]})]})}))})]})]}),e.jsxs(n,{position:["fixed","fixed","absolute","absolute"],bottom:0,left:0,bg:s[o].bgLinearCoolGreen2,width:"100%",justifyContent:"space-between",px:3,pt:[1,1,0,0],fontWeight:"bold",boxShadow:"base",pr:["5px","5px","25px","25px"],zIndex:5,children:[e.jsx(T,{fontSize:["11px","11px","12px","12px"],color:s[o].white,children:"Single Sign On Dashboard"}),e.jsxs(T,{fontSize:["11px","11px","12px","12px"],color:s[o].white,children:["© ",nt," UNUSIDA"]})]})]}):e.jsx(n,{bg:s[o].mainBg,position:"relative",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",children:e.jsx(A,{thickness:"4px",speed:"0.65s",emptyColor:"green.100",color:"green.600",size:"xl"})})]})};export{Ao as default};
