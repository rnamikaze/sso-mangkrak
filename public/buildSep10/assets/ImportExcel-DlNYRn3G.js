import{r as s,j as e}from"./app-BRf5toWG.js";/* empty css                  */import{F as y}from"./index.es-BtTm-lQZ.js";import{$ as I}from"./index-BhJBT7_l.js";import{F as d}from"./flex-DKwlgr-O.js";function P(t){return t.length>15?t.substring(0,15)+"...":t}function U(t,p,i){return i>=t.length||p>i?"Invalid indices provided":t.slice(0,p).concat(t.slice(i+1))}const B=({setAbsensiData:t,periodeStart:p,periodeEnd:i})=>{const[o,m]=s.useState(null),[C,h]=s.useState(0),[k,f]=s.useState(!1);s.useState([]),s.useState([]);const[x,g]=s.useState(null);s.useState(null);const F=n=>{const r=n.target.files[0];m(r)},b=async()=>{if(!o)return;f(!0);const n=new FormData;n.append("excel_file",o);try{const r=await axios.post("/sik/up-import-presensi",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:l=>{const a=Math.round(l.loaded*100/l.total);h(a)}});f(!1),j(r.data.import[0][1],r.data.import[0])}catch(r){console.error("Error uploading file:",r)}},j=(n,r)=>{const l=[];let a=null;U(r,0,1).forEach(c=>{a={};let u=!1;c.forEach((S,E)=>{c[2]!==null&&(a[n[E]]=S,u=!0)}),u&&l.push(a)}),t(l.filter(c=>c.rn_nik==x[3]))};return s.useEffect(()=>{b()},[o]),s.useEffect(()=>{axios.post("/usl/get-user-info",{by:"@rnamikaze"}).then(function(n){g(n.data)}).catch(function(n){})},[]),e.jsxs(d,{width:"max-content",bg:"gray.300",alignItems:"center",pl:2,borderRadius:"6px",border:"2px",borderColor:"gray.300",children:[e.jsx("div",{class:"file is-small",children:e.jsxs("label",{class:"file-label",children:[e.jsx("input",{onChange:F,class:"file-input",type:"file",name:"resume",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e.jsxs("span",{class:"file-cta",children:[e.jsx("span",{class:"file-icon",children:e.jsx(y,{icon:I})}),e.jsx("span",{class:"file-label",children:" Pilih File... "})]})]})}),e.jsxs(d,{ml:2,fontSize:"12px",lineHeight:"1.1em",alignItems:"center",px:3,py:2,bg:"#f5f5f5",borderRadius:"6px",children:["File:"," ",o===null?"Pilih File...":P(o.name),e.jsx("br",{}),"Ukuran:"," ",o===null?"Pilih File...":(o.size/1e3).toFixed(2)+" KB"]})]})};export{B as default};
