import{r as s,j as e,y as H}from"./app-BRf5toWG.js";import{F as h}from"./index.es-BtTm-lQZ.js";import{aC as T,aD as V}from"./index-BhJBT7_l.js";import{o as D}from"./index-B2KZh1O9.js";import{l as G}from"./index-DHNuJBZz.js";import{F as i}from"./flex-DKwlgr-O.js";import{B as m}from"./button-Dm7yfw5z.js";import{F as x,c as M}from"./use-form-control-DHIsxYm4.js";import{F as f}from"./form-label-DWu6OXKn.js";import{I as n}from"./input-DQBKHLse.js";import{I as y}from"./input-group-e4ltzjDZ.js";import{I as O}from"./input-addon-fzb-K6CY.js";import{B as C}from"./box-BqPd-jnX.js";import{H as k}from"./heading-D-CUm6-X.js";import{B as R}from"./badge-BWvN93--.js";import"./use-merge-refs-CHqHjQ4S.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./children-BMP1hdK-.js";const xe=({editLink:t,editId:d,newLinkStatus:c,changeViewActive:j,showPopUp:P,callPopUp:J})=>{const[U,g]=s.useState(null),[r,u]=s.useState({id:0,newUrl:"",alias:"",title:"",page:97}),[K,z]=s.useState(""),[v,Z]=s.useState(0),[$,b]=s.useState(null),[F,I]=s.useState(!1),[q,A]=s.useState(!1),L=l=>{const a=/^(ftp|http|https):\/\/[^ "]+$/.test(l);l.length<1?g(null):g(a)};function p(l){const o=l.target.id;let a=l.target.value,S="";o==="newUrl"&&(L(a),A(!0)),o==="alias"&&(S=a.replace(/[^a-zA-Z0-9-/.]/g,""),a=S,F===!1&&I(!0)),u(B=>({...B,[o]:a}))}const E=()=>{switch(U){case!0:return e.jsx(R,{colorScheme:"green",children:"Valid"});case!1:return e.jsx(R,{colorScheme:"red",children:"Tidak Valid"})}},_=(l,o=!1)=>{l.preventDefault(),H.post("/usl/saveEdit",r)},N=s.useCallback(()=>{b(c)},[c]),w=s.useCallback(()=>{t===void 0?u({newUrl:"tunggu...",alias:"tunggu...",title:"tunggu..."}):(u({id:d===null?t.id:d[0],newUrl:t.destination_url,alias:d===null?t.url:d[1],title:t.title}),z([t.url,t.alias]))},[t]);return s.useEffect(()=>{w()},[t]),s.useEffect(()=>{N()},[c]),s.useEffect(()=>{b(null),w()},[]),e.jsxs(i,{direction:"column",alignItems:"flex-end",my:3,border:"2px",borderColor:"gray.100",borderRadius:"6px",px:4,py:3,boxShadow:"sm",bg:"white",children:[e.jsx(i,{width:"100%",mb:3,children:e.jsxs(m,{onClick:()=>{j(0)},size:"sm",variant:"link",children:[e.jsx(h,{icon:T}),"  Kembali"]})}),e.jsxs(x,{children:[e.jsxs(f,{children:["Url Tujuan  ",E()]}),e.jsx(n,{borderRadius:"0px",value:r.newUrl,onChange:p,id:"newUrl",size:["sm","sm","md"],placeholder:"https://lorem.ipsum/lorem_ipsum_dolor_sit_amet_consectetur_adipiscing_elit",style:{userSelect:"none !important"}}),e.jsx(M,{children:"Masukan URL panjang disini"})]}),e.jsxs(x,{mt:2,children:[e.jsx(f,{children:"Judul URL"}),e.jsx(y,{size:["sm","sm","md"],pb:1,children:e.jsx(n,{size:["sm","sm","md"],value:r.title,onChange:p,id:"title",placeholder:"judul url",borderRadius:"0px"})})]}),e.jsxs(i,{as:"form",direction:"column",alignItems:"flex-end",width:"100%",onSubmit:_,children:[e.jsxs(x,{mt:2,children:[e.jsx(f,{children:"Masukan Link Alias"}),e.jsxs(y,{size:["sm","sm","md"],pb:1,children:[e.jsx(O,{borderRadius:"0px",children:"https://unusida.id/"}),e.jsx(n,{size:["sm","sm","md"],value:r.alias,onChange:p,id:"alias",placeholder:"linksaya",borderRadius:"0px"})]})]}),e.jsx(i,{mt:1,children:e.jsxs(m,{type:"submit",borderRadius:"0px",width:"max-content",size:["sm","sm","md"],colorScheme:"green",children:["Simpan  ",e.jsx(h,{icon:V})]})})]}),v===4?e.jsxs(i,{width:"100%",mt:3,border:"2px",borderColor:"gray.200",justifyContent:"space-between",bg:"gray.100",children:[e.jsxs(C,{bg:"white",mr:1,px:2,py:3,boxShadow:"base",flexGrow:1,children:[e.jsx(k,{as:"h3",mb:1,color:"gray.600",fontSize:"md",children:"Link Awal"}),e.jsx(n,{borderRadius:"0px",variant:"filled",userSelect:"none",placeholder:"Link Awal...",value:r.newUrl,isDisabled:!0,style:{userSelect:"none !important"}})]}),e.jsxs(C,{bg:"white",ml:1,px:2,py:3,boxShadow:"base",flexGrow:1,children:[e.jsx(k,{as:"h3",mb:1,color:"gray.600",fontSize:"md",children:"Link Hasil Shorten"}),e.jsx(n,{size:["sm","sm","md"],borderRadius:"0px",variant:"filled",placeholder:"Link Hasil...",userSelect:"none",value:"https://unusida.id/"+r.alias,isReadOnly:!0,style:{userSelect:"none !important"}}),e.jsxs(i,{mt:2,width:"100%",justifyContent:"flex-end",direction:"row",children:[e.jsx(m,{size:["sm","sm","md"],onClick:()=>{j(0)},colorScheme:"gray",mr:[0,0,2],children:"Lihat History"}),e.jsx(G.CopyToClipboard,{text:"https://unusida.id/"+r.alias,onCopy:()=>{alert("Link sudah di salin !")},children:e.jsxs(m,{size:["sm","sm","md"],colorScheme:"blue",children:["Copy  ",e.jsx(h,{icon:D})]})})]})]})]}):""]})};export{xe as default};
