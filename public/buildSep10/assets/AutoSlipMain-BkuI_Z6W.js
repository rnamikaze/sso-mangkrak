import{r as a,j as e,Y as he,S as M}from"./app-BRf5toWG.js";/* empty css                  */import{F as y}from"./index.es-BtTm-lQZ.js";import{f as je,a as be,b as ke,c as xe}from"./index-BhJBT7_l.js";import we from"./NameListCompact-Cwg5NcRq.js";import"./PDFOnly-MOLil32l.js";import ye from"./PdfOne-CVdFc59s.js";import Se from"./AslipSidebar-BIXk71mx.js";import De from"./WelcomeGreet-BYMxVwkv.js";import Pe from"./SendMail-O-2vudiN.js";import Fe from"./EmailsMain-CGF3xNd-.js";import{u as ve}from"./use-toast-Mdy3JCFw.js";import{F as s}from"./flex-DKwlgr-O.js";import{T as u}from"./text-CdRbiz2-.js";import{H as Ie}from"./heading-D-CUm6-X.js";import{B as Te}from"./button-Dm7yfw5z.js";import"./thead-jL1IYPIh.js";import"./tr-D0gvPZIT.js";import"./td-6W2IKI22.js";import"./switch-DpbwZCoL.js";import"./use-form-control-DHIsxYm4.js";import"./use-merge-refs-CHqHjQ4S.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./typeof-BVQB8lKn.js";import"./logo_unu_primary_green_small-hbguD8Ld.js";import"./server.browser-BtKpEVTK.js";import"./UploadFile-Z1F2PWUw.js";import"./SidebarIconItem-ChN8Yh76.js";import"./use-boolean-DWsdq_aC.js";import"./SidebarIconDailyCount-F5NIKoaZ.js";import"./circular-progress-By2wHYQi.js";import"./link-1ehCFDqS.js";import"./form-label-DWu6OXKn.js";import"./index-BV8y1BTx.js";import"./box-BqPd-jnX.js";import"./image-UHZF2dBf.js";import"./use-image-CxB9Ef0I.js";import"./PdfTwo-UqOvkx3Z.js";import"./SendButton-DNnpEywv.js";import"./table-caption-CKqYDs5J.js";import"./tfooter-ptamC6F2.js";import"./circular-progress-label-CCSojFN_.js";const G={rn_no:"NO",rn_nama_karyawan:"Nama Karyawan",rn_nik:"NIK/NID",rn_nama_buku_tabungan:"Nama Buku Tabungan",rn_jabatan:"Jabatan",rn_gol:"Gol.",rn_gaji_pokok:"Gaji Pokok",rn_tunjangan_jabatan:"Tunjangan Jabatan",rn_tunjangan_doktor:"Tunjangan Doktor",rn_transport:"Transport",rn_jabfung:"Jabfung",rn_subsidi_kesehatan:"Subsidi Kesehatan",rn_subsidi_ketenagakerjaan:"Subsidi Ketenagakerjaan",rn_subsidi_jaminan_pensiun:"Subsidi Jaminan Pensiun",rn_tunjangan_kpi:"Tunjangan KPI",rn_lembur:"Lembur",rn_insentif_uas:"Insentif UAS",rn_kelebihan_mengajar:"Dosen LB, Kelebihan mengajar",rn_jumlah_gaji:"Jumlah Gaji",rn_bpjs_kesehatan_1:"BPJS Kesehatan",rn_bpjs_kesehatan_2:null,rn_bpjs_kesehatan_3:null,rn_bpjs_ketenagakerjaan_1:"BPJS Ketenagakerjaan",rn_bpjs_ketenagakerjaan_2:null,rn_bpjs_ketenagakerjaan_3:null,rn_bpjs_ketenagakerjaan_4:null,rn_bpjs_pensiun:"BPJS Pensiun",rn_pinjaman:"Pinjaman",rn_koperasi_wajib:"Koperasi Wajib",rn_kop_pinjaman:"Kop pinjaman",rn_potongan_20:"Potongan 20%",rn_pd_pkpnu:"PD-PKPNU",rn_jpzis:"JPZIS",rn_potongan_lain:"Potongan lain-lain",rn_jumlah_potongan:"Jumlah Potongan",rn_koin_muktamar:"Koin Muktamar",rn_diterimakan:"Diterimakan",rn_no_rek:"No.Rek.",rn_bpjs_ketenagakerjaan_pembayaran:"BPJS Ketenagakerjaan (Pembayaran)",rn_email:"Email"},T={rn_no:0,rn_nik:"000000000000001",rn_nama_karyawan:"Nama Tendik",rn_nama_buku_tabungan:"laravel",rn_jabatan:"Web Developer",rn_gol:333,rn_gaji_pokok:333,rn_tunjangan_jabatan:333,rn_tunjangan_doktor:201,rn_transport:333,rn_jabfung:333,rn_subsidi_kesehatan:333,rn_subsidi_ketenagakerjaan:333,rn_subsidi_jaminan_pensiun:333,rn_tunjangan_kpi:333,rn_lembur:333,rn_insentif_uas:333,rn_kelebihan_mengajar:333,rn_jumlah_gaji:333,rn_bpjs_kesehatan_1:333,rn_bpjs_kesehatan_2:333,rn_bpjs_kesehatan_3:333,rn_bpjs_ketenagakerjaan_1:333,rn_bpjs_ketenagakerjaan_2:333,rn_bpjs_ketenagakerjaan_3:333,rn_bpjs_ketenagakerjaan_4:333,rn_bpjs_pensiun:333,rn_pinjaman:333,rn_koperasi_wajib:333,rn_kop_pinjaman:333,rn_potongan_20:333,rn_pd_pkpnu:333,rn_koin_muktamar:333,rn_jpzis:333,rn_diterimakan:333,rn_no_rek:333,rn_bpjs_ketenagakerjaan_pembayaran:333,rn_email:"rnamikaze@proton.me",rn_potongan_lain:77777,rn_jumlah_potongan:909090},wn=()=>{const[O,_]=a.useState(0),[g,V]=a.useState(null),[c,C]=a.useState([]),[f,p]=a.useState(null),[h,Q]=a.useState(0),[j,U]=a.useState(!1),[l,m]=a.useState([]),[S,D]=a.useState(void 0),[H,E]=a.useState([]),[Y,L]=a.useState(null),[z,q]=a.useState(window.innerWidth),[Z,b]=a.useState(!1),[P,k]=a.useState(1),[X,B]=a.useState(!1),$=a.useRef(null),K=a.useRef(null),[R,ee]=a.useState(!0),[F,ne]=a.useState(0),[v,Ce]=a.useState(95),[te,W]=a.useState([]),x="rn_last_used_file",ae=ve(),re=(n=null)=>{let t="Disimpan Otomatis";n!==null&&(t=n+" - "+t),ae({title:"Memuat File Sebelumnya",description:t,status:"info",duration:9e3,isClosable:!0})},ie=n=>{W(t=>{const r=[...t];return r.unshift(e.jsx(u,{display:"inline-block",color:"cyan.300",children:"Status: OK"})),r.unshift(e.jsxs(u,{display:"inline-block",children:["Tujuan: ",n]})),r})},oe=()=>{W([])},se=()=>{P<l.length-1&&k(n=>n+=1)},le=()=>{P>0&&k(n=>n-=1)},ce=()=>{let n=[],t=c[4];c.slice(5,h+2).forEach((i,N)=>{let I={};i.forEach((ge,fe)=>{I[t[fe]]=ge}),I.rn_included=!0,n.push(I)});let o=n.filter(i=>i.rn_included);m(n),E(o)},w=()=>{let n=c[4];const t=c[1];let r={};n.forEach((o,i)=>{r[o]=t[i]}),D(r)},ue=n=>{let t=l.slice(),r=t[n];r.rn_included=!r.rn_included,m(t);let o=t.filter(i=>i.rn_included);E(o)},d=()=>{U(n=>(n===!1?setTimeout(()=>{b(!0)},1500):b(!1),!n))},pe=n=>{const t=n.target.files[0];V(t)},me=async n=>{const t=new FormData;t.append("excel_file",n),t.append("name",n.name);const r="/aslip/up-file";p(!0),j&&d();const o=await axios.post(r,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:i=>{Math.round(i.loaded/i.total*100)}});try{o.data.good&&(C(o.data.file[0]),L(o.data.filename),d(),localStorage.setItem(x,o.data.filename),k(0),setTimeout(()=>{p(!1),w()},500))}catch{p(!0)}},de=n=>{let t=0;n.forEach((r,o)=>{r.forEach((i,N)=>{o>0&&N===2&&i!==null&&t++})}),Q(t),K.current},_e=()=>{switch(O){case 0:return e.jsxs(e.Fragment,{children:[j?e.jsxs(s,{id:"pdf-preview",ref:$,width:"77vw",mb:4,position:"relative",border:"2px",borderColor:"gray.200",className:"overflow-y",children:[Z===!1?e.jsx(s,{top:"0px",left:"0px",position:"absolute",width:"100%",height:"100%",bg:"#38a169ac",zIndex:35,alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",letterSpacing:"2px",children:e.jsxs(u,{px:3,py:1,color:"white",bg:"green.400",borderRadius:"15px",children:[e.jsx(y,{icon:je,spin:!0}),"   Menyiapkan..."]})}):"",e.jsx(e.Fragment,{children:f?e.jsxs(s,{height:"120px",alignItems:"center",width:"100%",justifyContent:"center",direction:"column",bg:"white",children:[e.jsx(u,{size:"18px",mb:3,color:"gray.600",children:"Membaca File..."}),e.jsx(M,{thickness:"4px",speed:"0.75s",emptyColor:"gray.200",color:"gray.600",size:"md"})]}):e.jsx(ye,{setIsReady:b,formatedTitle:S,targetData:l[P],incrementBtn:se,decrementBtn:le,formatedData:l})})]}):"",e.jsxs(s,{id:"imported-data",ref:K,direction:"column",width:"77vw",border:"2px",borderColor:"gray.200",bg:"white",children:[e.jsx(s,{alignItems:"center",bg:"green.500",px:3,py:2,children:e.jsx(Ie,{as:"h2",fontSize:"lg",color:"white",children:"Semua Data"})}),f===null?e.jsx(s,{height:"100%",alignItems:"center",width:"100%",justifyContent:"center",direction:"column",bg:"white",children:e.jsx(u,{fontSize:"lg",fontWeight:"bold",py:2,color:"green.500",children:"Upload File !"})}):f?e.jsxs(s,{height:"120px",alignItems:"center",width:"100%",justifyContent:"center",direction:"column",children:[e.jsx(u,{size:"18px",mb:3,color:"gray.600",children:"Membaca File..."}),e.jsx(M,{thickness:"4px",speed:"0.75s",emptyColor:"gray.200",color:"gray.600",size:"md"})]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{updateInclude:ue,rawData:c,formatedData:l}),e.jsxs(s,{pt:4,pb:2,px:2,alignItems:"center",justifyContent:"flex-end",children:[e.jsx(u,{fontWeight:"bold",mr:4,children:"Data Sudah Benar?"}),e.jsxs(Te,{colorScheme:"whatsapp",onClick:()=>{_(1)},children:["Selanjutnya   ",e.jsx(y,{style:{fontSize:"18px"},icon:be})]})]}),e.jsx(s,{justifyContent:"center",py:1,children:e.jsxs(u,{color:"gray",children:[e.jsx(y,{icon:ke,style:{color:"gray"}}),"  Pastikan alamat email sudah benar dan sesuai  ",e.jsx(y,{icon:xe,style:{color:"gray"}})]})})]})]})]});case 1:return e.jsx(Pe,{actualData:H,filename:Y,setActiveView:_,arrLog:te,pushArrLog:ie,clearArrLog:oe,passerData:l,formatedTitle:S,refreshDailyQuote:A,globalLimit:v,currentQuota:F});case 2:return e.jsx(Fe,{globalLimit:v,setIsReady:b,setActiveView:_,currentQuota:F})}},A=()=>{axios.post("/aslip/get-daily-quota",{id:"1"}).then(function(n){ne(n.data.dailyCounter)}).catch(function(n){})};a.useEffect(()=>{try{w()}catch{}},[h]),a.useEffect(()=>{try{const n=targetData.rn_nama_karyawan;w()}catch{l.length<1&&(m(t=>[...t,T]),D(G))}},[l]),a.useEffect(()=>{g!==null&&me(g)},[g]),a.useEffect(()=>{de(c);try{ce()}catch{m(t=>[...t,T])}},[c,h]);const J=()=>{q(window.innerWidth)};return a.useEffect(()=>{if(localStorage.getItem(x)!==null){const n=localStorage.getItem(x);window.innerWidth>=920&&n!="none"&&(p(!0),j&&d(),re(n),axios.post("/aslip/load-file",{filename:n}).then(function(t){t.data.good&&(C(t.data.file[0]),L(t.data.filename),d(),k(0),setTimeout(()=>{p(!1),w()},500))}).catch(function(t){p(!0)}))}else localStorage.setItem(x,"none"),D(G);return l.length<1&&m(n=>[...n,T]),A(),window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J)}},[]),a.useEffect(()=>{z<920?B(!0):B(!1)},[z]),a.useEffect(()=>{},[S]),e.jsxs(e.Fragment,{children:[e.jsx(he,{children:e.jsx("title",{children:"Batch Slip Sender"})}),X?e.jsx(s,{position:"absolute",top:"0px",bg:"green.600",zIndex:"100",width:"100vw",height:"100vh",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",children:e.jsxs(s,{width:"90vw",whiteSpace:"break-spaces",children:["Resolusi Layar Tidak Didukung ! ",e.jsx("br",{}),"Buka halaman ini dengan Browser Firefox (direkomendasikan) di PC atau Laptop"]})}):e.jsxs(s,{px:4,py:4,width:"100vw",minHeight:"100vh",direction:"column",position:"relative",alignItems:"flex-end",bg:"green.800",style:{backgroundImage:"url(https://storage.unusida.id/storage/img/celtic_icon.png)",backgroundRepeat:"repeat",backgroundSize:"50px"},children:[e.jsx(Se,{currentQuota:F,setActiveView:_,isLoading:f,file:g,fileAction:pe,rawData:c,dataRowCount:h,showPreview:j,toggleShowPreview:d,globalLimit:v}),l!==void 0&&l.length>0?e.jsx(e.Fragment,{children:_e()}):""]}),R?e.jsx(De,{showGreeting:R,setShowGreeting:ee}):""]})};export{wn as default};
