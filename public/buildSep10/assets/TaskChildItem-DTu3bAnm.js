import{r as l,j as e}from"./app-BRf5toWG.js";import{n as D,o as F,M}from"./index-BhJBT7_l.js";import{F as u}from"./index.es-BtTm-lQZ.js";import{d as k}from"./index-B2KZh1O9.js";import{F as i}from"./flex-DKwlgr-O.js";import{B as g}from"./box-BqPd-jnX.js";import{I as a}from"./input-DQBKHLse.js";import{S as P}from"./select-DiJvIInU.js";import{A as H,a as K}from"./alert-dialog-C8VgP9bi.js";import{M as N,b as J,c as V,d as q}from"./modal-overlay-BIVDhjzn.js";import{B as C}from"./button-Dm7yfw5z.js";import{B as j}from"./badge-BWvN93--.js";import{u as X}from"./use-disclosure-B8l4uvt7.js";import"./use-form-control-DHIsxYm4.js";import"./use-merge-refs-CHqHjQ4S.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./typeof-BVQB8lKn.js";const je=({isValidated:v=!1,mainTheme:b,task:o,index:Y,saveData:Q,setShowEmptyTask:U,addNewTask:Z,updateChildToParent:$,childIndex:L,deleteChildToParent:I,updateSubTask:S,callMyToast:R,userActiveLevel:d,percentage:p=0,isDosen:w})=>{const[r,m]=l.useState({id:0,title:"Tunggu",task_id:0,assigne:"",assigner_level:d,userId:0,progress_int:"0",progress_percentage:p,comment:"",start_date:"",end_date:"",active:!1}),[t,z]=l.useState(!1),[B,n]=l.useState(w?"#006769":"#48bb78"),{isOpen:E,onOpen:T,onClose:x}=X(),y=l.useRef(),_=[];for(let s=1;s<100;s++)_.push(s);function c(s){const f=s.target.id;let O=s.target.value;m(A=>({...A,[f]:O}))}const h=()=>{z(s=>!s)},W=()=>{if(parseInt(r.progress_int)>0&&parseInt(r.progress_int)<100)return e.jsxs(j,{variant:"solid",fontSize:"16px",colorScheme:"yellow",children:[parseInt(r.progress_int)," %"]});switch(parseInt(r.progress_int)){case 0:return e.jsx(j,{variant:"solid",colorScheme:"red",children:"Belum [0%]"});case 100:return e.jsx(j,{variant:"solid",colorScheme:"green",children:"Selesai [100%]"})}},G=l.useCallback(()=>{w?parseInt(o.assigner_level)===0?n("#006769"):parseInt(o.assigner_level)===1?n("#40A578"):parseInt(o.assigner_level)===2?n("#F3CA52"):parseInt(o.assigner_level)===3?n("#5E1675"):parseInt(o.assigner_level)===4?n("#EE4266"):parseInt(o.assigner_level)===5&&n("#E3651D"):o!==null&&(parseInt(o.assigner_level)===2?n("#f56565"):parseInt(o.assigner_level)===3&&n("#4299e1"))},[o]);return l.useEffect(()=>{m(s=>({...s,progress_percentage:p}))},[p]),l.useEffect(()=>{const s=o;s.progress_percentage=p,m(s),G()},[o]),e.jsxs(i,{direction:["row","row","row","column"],children:[e.jsxs(i,{px:3,py:2,bg:b.primary,color:b.boxBg,fontWeight:"bold",direction:["column","column","column","row"],display:["flex","flex","flex","none"],width:["45%","45%","45%","100%"],fontSize:["sm","sm","sm","md"],mt:[2,2,2,0],pr:[0,0,0,3],pl:[2,2,2,0],pb:[4,4,4,0],children:[e.jsx(i,{width:["100%","100%","100%","7%"],maxWidth:["100%","100%","100%","7%"],flexGrow:1,py:[1,1,1,0],mb:[2,2,2,0],children:"#"}),e.jsx(i,{width:["100%","100%","100%","30%"],maxWidth:["100%","100%","100%","30%"],flexGrow:1,py:[1,1,1,0],mb:[2,2,2,0],children:"Judul Task"}),e.jsx(i,{width:["100%","100%","100%","30%"],maxWidth:["100%","100%","100%","30%"],flexGrow:1,py:[1,1,1,0],mb:[2,2,2,0],children:"Assigne"}),e.jsx(i,{width:["100%","100%","100%","20%"],maxWidth:["100%","100%","100%","20%"],flexGrow:1,py:[1,1,1,0],mb:[2,2,2,0],children:"Due Date"}),e.jsx(i,{width:["100%","100%","100%","13%"],maxWidth:["100%","100%","100%","13%"],flexGrow:1,py:[1,1,1,0],children:"Progress"})]}),e.jsxs(i,{bg:"white",mt:[2,2,2,0],pr:[0,0,0,3],pl:[2,2,2,0],py:2,pb:[4,4,4,0],width:"100%",transition:"250ms ease-out",justifyContent:"flex-end",direction:["column","column","column","row"],borderTop:["2px","2px","2px","0px"],borderTopColor:"gray.300",borderBottom:["2px","2px","2px","0px"],borderBottomColor:"gray.300",children:[v?"":e.jsxs(i,{alignItems:"center",width:["100%","100%","100%","7%"],maxWidth:["100%","100%","100%","7%"],flexGrow:1,mb:[2,2,2,0],pr:[3,3,3,0],justifyContent:["flex-end","flex-end","flex-end","center"],children:[e.jsx(g,{position:"relative",left:"-2px",as:"button",type:"submit",color:t?"green.500":"blue.500",cursor:"pointer",mr:2,onClick:t?()=>{S(r.id,r),h()}:h,children:e.jsx(u,{icon:t?D:k})}),t?e.jsx(g,{color:"red.500",cursor:"pointer",onClick:h,children:e.jsx(u,{icon:F})}):e.jsx(g,{color:"red.500",onClick:()=>{d<=o.assigner_level?T():R("warning","Anda tidak bisa menghapus SubTask ini.")},cursor:"pointer",children:e.jsx(u,{icon:M})})]}),e.jsx(i,{borderLeft:"2px",borderColor:B,width:["100%","100%","100%","30%"],maxWidth:["100%","100%","100%","30%"],pl:[0,0,0,3],pr:2,flexGrow:1,mb:[2,2,2,0],children:d<=o.assigner_level?e.jsx(a,{id:"title",size:"sm",placeholder:"Judul",value:r.title,onChange:c,isReadOnly:!t,borderColor:t?"gray.200":"transparent"}):e.jsx(a,{id:"title",size:"sm",placeholder:"Komentar",value:r.title,isReadOnly:!0,borderColor:"transparent"})}),e.jsx(i,{width:["100%","100%","100%","30%"],maxWidth:["100%","100%","100%","30%"],pr:2,flexGrow:1,mb:[2,2,2,0],children:d<=o.assigner_level?e.jsx(a,{id:"comment",size:"sm",placeholder:"Komentar",value:r.comment,onChange:c,isReadOnly:!t,borderColor:t?"gray.200":"transparent"}):e.jsx(a,{id:"comment",size:"sm",placeholder:"Komentar",value:r.comment,isReadOnly:!0,borderColor:"transparent"})}),e.jsx(i,{width:["100%","100%","100%","20%"],maxWidth:["100%","100%","100%","20%"],pr:2,flexGrow:1,mb:[2,2,2,0],children:d<=o.assigner_level?e.jsx(a,{id:"due_date",size:"sm",borderRadius:"6px",value:r.due_date,onChange:c,type:"date",color:"gray.600",isReadOnly:!t}):e.jsx(a,{id:"due_date",size:"sm",borderRadius:"6px",value:r.due_date,type:"date",color:"gray.600",isReadOnly:!0})}),e.jsx(i,{alignItems:"center",width:["100%","100%","100%","13%"],maxWidth:["100%","100%","100%","13%"],flexGrow:1,pr:[2,2,2,0],justifyContent:["flex-end","flex-end","flex-end","flex-start"],children:t?e.jsxs(P,{id:"progress_int",onChange:c,size:"sm",borderRadius:"6px",children:[e.jsx("option",{value:"0",selected:r.progress_int==0,children:"Not Yet [0%]"}),e.jsx("option",{value:"100",selected:r.progress_int==100,children:"Finished [100%]"}),_.map((s,f)=>e.jsxs("option",{value:s,selected:r.progress_int==s,children:[s," %"]},f))]}):W()})]}),e.jsx(H,{isOpen:E,leastDestructiveRef:y,onClose:x,children:e.jsx(N,{display:"flex",alignItems:"center",children:e.jsxs(K,{width:["85vw","85vw","inherit","inherit"],children:[e.jsx(J,{fontSize:"md",fontWeight:"bold",children:"Hapus Tugas?"}),e.jsx(V,{fontSize:"sm",children:"Setelah Menghapus, anda tidak bisa mengembalikannya."}),e.jsxs(q,{children:[e.jsx(C,{size:"sm",ref:y,onClick:x,children:"Batal"}),e.jsx(C,{size:"sm",colorScheme:"red",onClick:()=>{I(r.id,r.task_id),x()},ml:3,children:"Hapus"})]})]})})})]})};export{je as default};
