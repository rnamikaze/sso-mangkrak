import{r as c,g as S}from"./app-BRf5toWG.js";function h(s){const{loading:r,src:n,srcSet:l,onLoad:t,onError:a,crossOrigin:u,sizes:f,ignoreFallback:d}=s,[g,m]=c.useState("pending");c.useEffect(()=>{m(n?"loading":"pending")},[n]);const o=c.useRef(),E=c.useCallback(()=>{if(!n)return;i();const e=new Image;e.src=n,u&&(e.crossOrigin=u),l&&(e.srcset=l),f&&(e.sizes=f),r&&(e.loading=r),e.onload=p=>{i(),m("loaded"),t==null||t(p)},e.onerror=p=>{i(),m("failed"),a==null||a(p)},o.current=e},[n,u,l,f,t,a,r]),i=()=>{o.current&&(o.current.onload=null,o.current.onerror=null,o.current=null)};return S(()=>{if(!d)return g==="loading"&&E(),()=>{i()}},[g,E,d]),d?"loaded":g}const I=(s,r)=>s!=="loaded"&&r==="beforeLoadOrError"||s==="failed"&&r==="onError";export{I as s,h as u};
