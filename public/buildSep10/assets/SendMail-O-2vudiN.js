import{r as n,j as e}from"./app-BRf5toWG.js";import N from"./PdfTwo-UqOvkx3Z.js";import{F as h}from"./index.es-BtTm-lQZ.js";import{d as z,f as w}from"./index-BhJBT7_l.js";import{B as L,b as M}from"./PDFOnly-MOLil32l.js";import W from"./SendButton-DNnpEywv.js";import{F as o}from"./flex-DKwlgr-O.js";import{B as K}from"./button-Dm7yfw5z.js";import{T as U,a as q,b as i,c as H}from"./thead-jL1IYPIh.js";import{T as O,a as u}from"./tr-D0gvPZIT.js";import{T as V}from"./table-caption-CKqYDs5J.js";import{T as m}from"./td-6W2IKI22.js";import{T as G}from"./tfooter-ptamC6F2.js";import"./server.browser-BtKpEVTK.js";import"./typeof-BVQB8lKn.js";import"./logo_unu_primary_green_small-hbguD8Ld.js";import"./use-merge-refs-CHqHjQ4S.js";import"./attr-sHTFgF0E.js";const be=({actualData:J,filename:Q,setActiveView:y,arrLog:X,pushArrLog:Y,clearArrLog:S,passerData:f,formatedTitle:l,refreshDailyQuote:T,globalLimit:_,currentQuota:B})=>{const[k,Z]=n.useState(!1),[a,E]=n.useState(0),[t,C]=n.useState([]),[D,F]=n.useState(!1),[x,v]=n.useState(null),[I,j]=n.useState(!1),[b,p]=n.useState([]);n.useState([]);const[g,A]=n.useState(!1),[$,P]=n.useState(null),R=s=>{const r=new FormData;r.append("file",x),r.append("name",t[a].rn_nama_karyawan),r.append("email",t[a].rn_email),r.append("bank_rek",t[a].rn_nama_buku_tabungan),r.append("no_rek",t[a].rn_no_rek),r.append("no",t[a].rn_no),r.append("jabatan",t[a].rn_jabatan),axios.post("/aslip/send-mail",r,{headers:{"Content-Type":"multipart/form-data"}}).then(d=>{if(d.request.status===200){let c=b;c[s]=!0,p(c)}else{let c=b;c[s]=null,p(c)}}).catch(d=>{console.error(d)})};n.useEffect(()=>{C(f)},[f]),n.useEffect(()=>{typeof l=="object"&&P(l)},[l]),n.useEffect(()=>{if(t!==null&&t.length>0){let s=[];t.map(r=>{s.push(!1)}),p(s)}},[t]),n.useEffect(()=>{},[l]),n.useEffect(()=>{setTimeout(()=>{F(!0)},1500)},[]);try{return e.jsx(e.Fragment,{children:t!==void 0&&t.length>0?e.jsxs(o,{width:"77vw",height:"max-content",bg:"white",direction:"column",position:"relative",border:"2px",borderColor:"gray.200",children:[e.jsx(o,{bg:"whitesmoke",borderBottom:"2px",borderColor:"gray.100",px:2,py:2,children:e.jsxs(K,{colorScheme:"red",width:"max-content",onClick:()=>{y(0),S()},size:"sm",isDisabled:g,children:[e.jsx(h,{icon:z}),"  Kembali"]})}),e.jsx(N,{formatedTitle:l,targetData:t[a],incrementBtn:null,decrementBtn:null,formatedData:t}),D===!1?e.jsxs(o,{top:"0px",left:"0px",position:"absolute",width:"100%",height:"100%",bg:"#38a169ac",zIndex:50,alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",letterSpacing:"2px",children:[e.jsx(h,{icon:w,spin:!0}),"   Menyiapkan..."]}):"",e.jsxs(o,{mt:1,mb:3,position:"relative",justifyContent:"space-between",children:[e.jsx(o,{children:e.jsx(L,{document:e.jsx(M,{formatedTitle:l,targetData:t[a]}),children:({blob:s,url:r,loading:d,error:c})=>(s&&(v(s),j(!0)),e.jsx(e.Fragment,{}))})}),k?e.jsxs(o,{ml:2,color:"#2f2f2f",fontWeight:"bold",px:3,alignItems:"center",bg:"blue.100",children:["Mengirim",e.jsx(h,{icon:w,spin:!0})]}):""]}),e.jsx(o,{border:"gray.300",width:"100%",children:e.jsx(U,{width:"100%",children:e.jsxs(O,{size:"sm",children:[e.jsx(V,{children:"Kirim Email"}),e.jsx(q,{children:e.jsxs(u,{children:[e.jsx(i,{children:"No"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Nama"}),e.jsx(i,{children:"Aksi"})]})}),e.jsx(H,{children:t.map((s,r)=>e.jsxs(u,{onClick:()=>{g===!1&&(E(r),j(!1))},cursor:"pointer",style:{fontWeight:a===r?"bold":"normal",background:a===r?"#d4d4d7":"white"},children:[e.jsx(m,{children:s.rn_no}),e.jsx(m,{children:s.rn_email}),e.jsx(m,{children:s.rn_nama_karyawan}),e.jsx(m,{children:e.jsx(W,{sendMailTwo:R,blobReady:I,viewerPointer:a,index:r,formatedData:t,blobUrl:x,setDontInterupt:A,refreshDailyQuote:T,globalLimit:_,currentQuota:B})})]}))}),e.jsx(G,{children:e.jsxs(u,{children:[e.jsx(i,{children:"No"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Nama"}),e.jsx(i,{children:"Aksi"})]})})]})})})]}):""})}catch{return e.jsx(o,{color:"white",children:"Hehe"})}};export{be as default};
