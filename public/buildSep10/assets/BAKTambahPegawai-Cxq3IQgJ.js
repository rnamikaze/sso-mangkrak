import{r as c,j as e,y as q}from"./app-BRf5toWG.js";import{F as P}from"./index.es-BtTm-lQZ.js";import X from"./SelectInput-5OQyStZD.js";import d from"./TextInput-DFUIMgRm.js";import{d as be}from"./index-BhJBT7_l.js";import{g as fe}from"./index-B2KZh1O9.js";import k from"./SelectInputNamco-D-bo0LW4.js";import h from"./SelectInputProv-CwI3VUei.js";import{F as s}from"./flex-DKwlgr-O.js";import{H as _}from"./heading-D-CUm6-X.js";import{T as j}from"./text-CdRbiz2-.js";import{F as L}from"./use-form-control-DHIsxYm4.js";import{F as z}from"./form-label-DWu6OXKn.js";import{I as Se}from"./input-DQBKHLse.js";import{S as ve}from"./switch-DpbwZCoL.js";import{R as Ce,a as $}from"./radio-D7DRAibN.js";import{S as ye}from"./stack-BP7DhAec.js";import{S as Ae}from"./select-DiJvIInU.js";import{B as D}from"./button-Dm7yfw5z.js";import"./use-merge-refs-CHqHjQ4S.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./responsive-CKTKN8qq.js";import"./children-BMP1hdK-.js";function Fe(){const n=new Date,A=n.getFullYear();let m=n.getMonth()+1,x=n.getDate();return m<10&&(m="0"+m),x<10&&(x="0"+x),A+"-"+m+"-"+x}const tt=({mainTheme:n,unitKerja:A,jabatanFun:m,jabatanStr:x,fakultas:V,prodi:Y,list_provinsi:g,list_kabupaten:b=null,list_kabupaten2:f=null,list_kecamatan:S=null,list_desa:v=null,list_kecamatan2:C=null,list_desa2:y=null,showToast:Ke,changeSelectedMenu:F,selectedDataPegawai:r=null,editMode:p=!1})=>{const[t,K]=c.useState(r===null?{modeEdit:p,nik:"",fullname:"",tempat_lahir:"",tanggal_lahir:Fe(),tinggi_badan:0,berat_badan:0,kelamin:0,telepon:"",email:"",pendidikan_terakhir:"",url_ijazah:"",no_bpjs_kes:"",no_bpjs_kerja:"",status:"",unit_id:"",jabatan_struktural_id:"",jabatan_fungsional_id:"",status_serdos:"",fakultas:"",prodi:"",imgFile:null,kerabat_nama:"",kerabat_hubungan:"",kerabat_telepon:"",provinsi:"",kota_kab:"",kecamatan:"",desa_kel:"",rt:"",rw:"",kodepos:"",provinsi_2:"",kota_kab_2:"",kecamatan_2:"",desa_kel_2:"",rt_2:"",rw_2:"",kodepos_2:""}:{modeEdit:p,mainId:r[0].id,nik:r[0].nik,fullname:r[0].fullname,tempat_lahir:r[0].tempat_lahir,tanggal_lahir:r[0].tanggal_lahir,tinggi_badan:r[0].tinggi_badan,berat_badan:r[0].berat_badan,kelamin:r[0].kelamin,telepon:r[0].telepon,email:r[0].email,pendidikan_terakhir:r[0].pendidikan_terakhir,url_ijazah:r[1].url_ijazah,no_bpjs_kes:r[0].no_bpjs_kes,no_bpjs_kerja:r[0].no_bpjs_kerja,status:r[0].status,unit_id:r[0].unit_id,jabatan_struktural_id:r[0].jabatan_struktural_id,jabatan_fungsional_id:r[0].jabatan_fungsional_id,status_serdos:r[0].status_serdos,fakultas:"",prodi:"",imgFile:null,kerabat_nama:r[0].kerabat_nama,kerabat_hubungan:r[0].kerabat_hubungan,kerabat_telepon:r[0].kerabat_telepon,provinsi:r[1].provinsi,kota_kab:r[1].kota_kab,kecamatan:r[1].kecamatan,desa_kel:r[1].desa_kel,rt:r[1].rt,rw:r[1].rw,kodepos:r[1].kode_pos,provinsi_2:r[1].provinsi_2,kota_kab_2:r[1].kota_kab_2,kecamatan_2:r[1].kecamatan_2,desa_kel_2:r[1].desa_kel_2,rt_2:r[1].rt_2,rw_2:r[1].rw_2,kodepos_2:r[1].kode_pos_2}),[Q,H]=c.useState([]),[Z,W]=c.useState([]),[M,G]=c.useState([]),[T,I]=c.useState([]),[ee,N]=c.useState([]),[te,E]=c.useState([]),[B,ne]=c.useState(!1),[oe,J]=c.useState(p),[O,R]=c.useState(p),[U,w]=c.useState(p),[ae,Ie]=c.useState(r===null?"":r[0].nik),[re,Ne]=c.useState(r===null?"":r[0].email),ie=()=>{const l=document.head.querySelector('meta[name="csrf-token"]').content;t.nik===re?R(!0):fetch("/sik/check-email",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l},body:JSON.stringify({email:t.email})}).then(o=>o.json()).then(o=>{o[0]===1?(alert(`Email ${o[1]} sudah digunakan`),R(!1)):R(!0)}).catch(o=>{console.error("Error:",o)})},le=()=>{const l=document.head.querySelector('meta[name="csrf-token"]').content;t.nik===ae?w(!0):fetch("/sik/check-nik",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l},body:JSON.stringify({nik:t.nik})}).then(o=>o.json()).then(o=>{o[0]===1?(alert(`NIK ${o[1]} sudah terdaftar`),w(!1)):w(!0)}).catch(o=>{console.error("Error:",o)})},se=l=>{l.preventDefault(),F(1),q.post("/sik/simpan-tambah-pegawai",t)},de=l=>{l.preventDefault(),F(1),q.post("/sik/simpan-ubah-pegawai",t)};function ce(){ne(o=>!o);let l=t;B===!1&&(E([]),I([]),N([]),t.provinsi_2="",t.kota_kab_2="",t.kecamatan_2="",t.desa_kel_2="",t.rw_2="",t.rt_2="",t.kodepos_2="",K(l))}function i(l){const o=l.target.id;let a=l.target.value,u="";o==="nik"||o==="telepon"||o==="kerabat_telepon"?(u=a.replace(/\D/g,""),a=u):o==="rt"||o==="rw"||o==="kodepos"?(u=a.replace(/\D/g,""),a=u):o==="rt_2"||o==="rw_2"||o==="kodepos_2"?(u=a.replace(/\D/g,""),a=u):o==="tinggi_badan"||o==="berat_badan"?(u=a.replace(/\D/g,""),a=u):o==="email"&&(u=a.replace(/\s/g,""),a=u),K(_e=>({..._e,[o]:a}))}const ue=l=>{const o=t;o.imgFile=l.target.files[0],K(o),alert(JSON.stringify(l.target.files))},he=l=>{const o=l.target.value;fetch("/api/get-kabupaten/"+o).then(a=>a.json()).then(a=>{H(a)}).catch(a=>{console.error("Error:",a)}),i(l)},pe=l=>{const o=l.target.value;fetch("/api/get-kecamatan/"+o).then(a=>a.json()).then(a=>{W(a)}).catch(a=>{console.error("Error:",a)}),i(l)},me=l=>{const o=l.target.value;fetch("/api/get-desa/"+o).then(a=>a.json()).then(a=>{G(a)}).catch(a=>{console.error("Error:",a)}),i(l)},xe=l=>{const o=l.target.value;fetch("/api/get-kabupaten/"+o).then(a=>a.json()).then(a=>{I(a)}).catch(a=>{console.error("Error:",a)}),i(l)},je=l=>{const o=l.target.value;fetch("/api/get-kecamatan/"+o).then(a=>a.json()).then(a=>{N(a)}).catch(a=>{console.error("Error:",a)}),i(l)},ge=l=>{const o=l.target.value;fetch("/api/get-desa/"+o).then(a=>a.json()).then(a=>{E(a)}).catch(a=>{console.error("Error:",a)}),i(l)};c.useEffect(()=>{[O,U].some(o=>o===!1)?J(!1):J(!0)},[O,U]);const ke=c.useCallback(()=>{[g,b,f,S,v,C,y].some(o=>o===null)||(H(b),I(f),W(S),N(C),G(v),E(y))},[g,b,f,S,v,C,y]);return c.useEffect(()=>{ke()},[g,b,f,S,v,C,y]),e.jsxs(s,{as:"form",onSubmit:p?de:se,bg:n.boxBg,width:"100%",maxWidth:"100%",height:"max-content",borderRadius:"6px",direction:"column",pt:3,pb:3,children:[e.jsx(s,{width:"100%",height:"max-content",bg:n.primary,px:2,py:1,pt:2,alignItems:"center",children:e.jsx(_,{color:n.boxBg,fontSize:"20px",fontWeight:"bold",children:"Tambah Pegawai"})}),e.jsxs(s,{direction:["column","column","column","row"],width:"100%",height:"max-content",borderBottom:"2px",borderColor:"gray.200",pb:3,children:[e.jsxs(s,{width:["100%","100%","100%","200px"],justifyItems:"center",alignItems:"center",direction:"column",children:[e.jsx(s,{mx:5,mt:5,width:["150px","150px","150px","80%"],height:"200px",bg:"gray.400",alignItems:"center",justifyContent:"center",children:"Foto"}),e.jsx(s,{bg:"white",children:e.jsx("div",{style:{margin:"10px 0px"},class:"file has-name is-small",children:e.jsxs("label",{class:"file-label",children:[e.jsx("input",{class:"file-input",type:"file",onChange:ue}),e.jsxs("span",{style:{padding:"0px 15px 0px 0px"},class:"file-cta",children:[e.jsx("span",{class:"file-icon",children:e.jsx("i",{class:"fas fa-upload"})}),e.jsx("span",{class:"file-label",children:"Upload "})]}),e.jsx("span",{style:{background:"gray",color:"white"},class:"file-name",children:"Foto.png"})]})})})]}),e.jsxs(s,{direction:"column",flexGrow:1,px:4,py:4,children:[e.jsx(j,{fontSize:"md",fontWeight:"bold",color:n.heading,textDecoration:"underline",children:"Biodata"}),e.jsxs(s,{width:"100%",direction:"column",children:[e.jsx(d,{idField:"nik",onChangeAction:i,onBlurAction:le,maxL:18,value:t.nik,title:"NIK Dosen/Tendik",placeholder:"NIK Dosen/Tendik",mainTheme:n}),e.jsx(d,{idField:"fullname",onChangeAction:i,value:t.fullname,title:"Nama Dosen/Tendik",placeholder:"Nama Dosen/Tendik",mainTheme:n}),e.jsxs(s,{width:"100%",direction:["column","column","column","row"],children:[e.jsx(d,{idField:"tempat_lahir",onChangeAction:i,value:t.tempat_lahir,title:"Tempat Lahir",placeholder:"Tempat Lahir",mainTheme:n,mr:2}),e.jsxs(L,{mt:1,children:[e.jsx(z,{fontSize:"sm",children:"Tanggal Lahir"}),e.jsx(Se,{id:"tanggal_lahir",onChange:i,value:t.tanggal_lahir,bg:"gray.200",placeholder:"Select Date and Time",size:"sm",type:"date"})]})]}),e.jsxs(s,{width:"100%",direction:["column","column","column","row"],children:[e.jsx(X,{idField:"kelamin",onChangeAction:i,mainTheme:n,title:"Jenis Kelamin",placeholder:"Pilih",mt:1,mr:3,arrayValue:[{id:0,title:"Perempuan",value:0},{id:1,title:"Laki - Laki",value:1}]}),e.jsx(d,{idField:"tinggi_badan",onChangeAction:i,maxL:3,value:t.tinggi_badan,title:e.jsxs(e.Fragment,{children:["Tinggi Badan ",e.jsx("span",{style:{fontSize:"9px",fontWeight:"bold",position:"relative",top:"-4px"},children:"CM"})]}),placeholder:"Cth: 170",mainTheme:n,mr:3}),e.jsx(d,{idField:"berat_badan",onChangeAction:i,maxL:3,value:t.berat_badan,title:e.jsxs(e.Fragment,{children:["Berat Badan ",e.jsx("span",{style:{fontSize:"9px",fontWeight:"bold",position:"relative",top:"-4px"},children:"KG"})]}),placeholder:"Cth: 60",mainTheme:n})]})]})]})]}),e.jsxs(s,{width:"100%",height:"max-content",direction:["column","column","column","row"],children:[e.jsxs(s,{flexGrow:1,maxWidth:["100%","100%","100%","48%"],direction:"column",borderRight:["0px","0px","0px","2px solid #e2e8f0"],borderBottom:"2px",borderColor:"gray.200",pt:2,px:3,pb:5,children:[e.jsx(s,{height:"40px",alignItems:"center",children:e.jsx(_,{color:n.heading,fontSize:"15px",fontWeight:"bold",children:e.jsx(j,{textDecoration:"underline",children:"Alamat Sesuai KTP"})})}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(h,{title:"Provinsi",placeholder:"PILIH PROVINSI",mainTheme:n,idField:"provinsi",value:t.provinsi,onChangeAction:he,mt:1,mr:3,arrayValue:g}),e.jsx(h,{title:"Kabupaten",placeholder:"PILIH KABUPATEN",mainTheme:n,idField:"kota_kab",value:t.kota_kab,onChangeAction:pe,mt:1,mr:0,arrayValue:Q})]}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(h,{title:"Kecamatan ku",placeholder:"PILIH KECAMATAN",mainTheme:n,idField:"kecamatan",value:t.kecamatan,onChangeAction:me,mt:1,mr:3,arrayValue:Z}),e.jsx(h,{title:"Desa/Kelurahan",placeholder:"PILIH DESA",mainTheme:n,idField:"desa_kel",value:t.desa_kel,onChangeAction:i,mt:1,mr:0,arrayValue:M})]}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(d,{title:"RT",placeholder:"RT",mainTheme:n,idField:"rt",value:t.rt,onChangeAction:i,mt:1,mr:3}),e.jsx(d,{title:"RW",placeholder:"RW",mainTheme:n,idField:"rw",value:t.rw,onChangeAction:i,mt:1,mr:3}),e.jsx(d,{title:"Kode Pos",placeholder:"Kode Pos",mainTheme:n,idField:"kodepos",value:t.kodepos,onChangeAction:i,mt:1,mr:0})]})]}),e.jsxs(s,{flexGrow:1,direction:"column",pt:2,borderBottom:"2px",borderColor:"gray.200",px:3,pb:5,children:[e.jsxs(s,{width:"100%",justifyContent:"space-between",alignItems:"center",height:"40px",children:[e.jsx(_,{color:n.heading,fontSize:"15px",fontWeight:"bold",children:e.jsx(j,{textDecoration:"underline",children:"Alamat Saat Ini"})}),e.jsxs(L,{display:"flex",alignItems:"center",width:"max-content",mb:2,children:[e.jsx(z,{htmlFor:"email-alerts",mb:"0",children:"Sama dengan KTP?"}),e.jsx(ve,{colorScheme:"green",value:B,onChange:ce,id:"email-alerts"})]})]}),B?e.jsx(s,{height:"max-content",py:2,px:2,bg:n.mainBg,children:"Kamu memilih alamat saat ini sama dengan KTP"}):e.jsxs(e.Fragment,{children:[e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(h,{title:"Provinsi",placeholder:"PILIH PROVINSI",mainTheme:n,idField:"provinsi_2",value:t.provinsi_2,onChangeAction:xe,mt:1,mr:3,arrayValue:g}),e.jsx(h,{title:"Kabupaten",placeholder:"PILIH KABUPATEN",mainTheme:n,value:t.kota_kab_2,idField:"kota_kab_2",onChangeAction:je,mt:1,mr:0,arrayValue:T})]}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(h,{title:"Kecamatan",placeholder:"PILIH KECAMATAN",mainTheme:n,idField:"kecamatan_2",value:t.kecamatan_2,onChangeAction:ge,mt:1,mr:3,arrayValue:ee}),e.jsx(h,{title:"Desa/Kelurahan",placeholder:"PILIH DESA",mainTheme:n,idField:"desa_kel_2",value:t.desa_kel_2,onChangeAction:i,mt:1,mr:0,arrayValue:te})]}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(d,{title:"RT",placeholder:"RT",mainTheme:n,idField:"rt_2",value:t.rt_2,onChangeAction:i,mt:1,mr:3}),e.jsx(d,{title:"RW",placeholder:"RW",mainTheme:n,idField:"rw_2",value:t.rw_2,onChangeAction:i,mt:1,mr:3}),e.jsx(d,{title:"Kode Pos",placeholder:"Kode Pos",mainTheme:n,idField:"kodepos_2",value:t.kodepos_2,onChangeAction:i,mt:1,mr:0})]})]})]})]}),e.jsxs(s,{width:"100%",height:"max-content",px:3,direction:["column","column","column","row"],children:[e.jsxs(s,{flexGrow:1,maxWidth:["100%","100%","100%","48%"],minWidth:["100%","100%","100%","48%"],direction:"column",borderRight:["0px","0px","0px","2px solid #e2e8f0"],pt:2,pr:[0,0,0,3],children:[e.jsx(s,{height:"40px",alignItems:"center",children:e.jsx(_,{color:n.heading,fontSize:"15px",fontWeight:"bold",children:e.jsx(j,{textDecoration:"underline",children:"Data Tambahan"})})}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(d,{title:"No. HP/Telepon",placeholder:"No. HP/Telepon",mainTheme:n,idField:"telepon",value:t.telepon,onChangeAction:i,mt:1,mr:3}),e.jsx(d,{title:"Email",placeholder:"Email",mainTheme:n,idField:"email",type:"email",value:t.email,onChangeAction:i,onBlurAction:ie,mt:1,mr:0})]}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(d,{title:"No. BPJS Kesehatan",placeholder:"No. BPJS Kesehatan",idField:"no_bpjs_kes",value:t.no_bpjs_kes,onChangeAction:i,mainTheme:n,mt:1,mr:3}),e.jsx(d,{title:"No. BPJS Ketenagakerjaan",placeholder:"No. BPJS Ketenagakerjaan",mainTheme:n,value:t.no_bpjs_kerja,idField:"no_bpjs_kerja",onChangeAction:i,mt:1,mr:0})]}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(X,{title:"Pendidikan Terakhir",placeholder:"Pendidikan Terakhir",mainTheme:n,idField:"pendidikan_terakhir",onChangeAction:i,mt:1,mr:3,arrayValue:[{id:0,title:"SD Sederajat",value:"sd"},{id:1,title:"SMP Sederajat",value:"smp"},{id:2,title:"SMA Sederajat",value:"sma"},{id:3,title:"Diploma",value:"Diploma"},{id:4,title:"S1",value:"s1"},{id:5,title:"S2",value:"s2"},{id:6,title:"S3",value:"s3"}]}),e.jsx(d,{title:"URL Ijazah Terakhir",placeholder:"https://drive.google.com/",mainTheme:n,value:t.url_ijazah,idField:"url_ijazah",onChangeAction:i,mt:1,mr:0})]}),e.jsxs(s,{direction:"column",pt:4,children:[e.jsx(j,{fontWeight:"bold",children:"Kerabat Terdekat"}),e.jsx(d,{title:"Nama",placeholder:"Nama",mainTheme:n,value:t.kerabat_nama,idField:"kerabat_nama",onChangeAction:i,mt:1,mr:3}),e.jsx(d,{title:"Hubungan",placeholder:"Hubungan",mainTheme:n,value:t.kerabat_hubungan,idField:"kerabat_hubungan",onChangeAction:i,mt:1,mr:0}),e.jsx(d,{title:"No. HP",placeholder:"No. HP",mainTheme:n,idField:"kerabat_telepon",value:t.kerabat_telepon,onChangeAction:i,mt:1,mr:0})]})]}),e.jsxs(s,{flexGrow:1,direction:"column",pt:2,px:[0,0,0,3],children:[e.jsx(s,{width:"100%",justifyContent:"space-between",alignItems:"center",height:"40px",children:e.jsx(_,{color:n.heading,fontSize:"15px",fontWeight:"bold",children:e.jsx(j,{textDecoration:"underline",children:"Status Kepegawaian"})})}),e.jsx(s,{children:e.jsx(Ce,{value:t.status,mt:"20px",mb:"20px",children:e.jsxs(ye,{direction:"row",children:[e.jsx($,{onChange:i,id:"status",value:"1",children:"Dosen"}),e.jsx($,{onChange:i,id:"status",value:"2",children:"Tenaga Kependidikan"})]})})}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(k,{arrayValue:V,idField:"fakultas",onChangeAction:i,mainTheme:n,title:"Fakultas",value:t.fakultas,mr:3,setRequired:!0}),e.jsx(k,{arrayValue:A,idField:"unit_id",onChangeAction:i,mainTheme:n,value:t.unit_id,title:"Unit Kerja",mr:3,setRequired:!0})]}),e.jsxs(s,{direction:["column","column","column","row"],children:[e.jsx(k,{arrayValue:Y.filter(l=>l.fakultas_id==t.fakultas),idField:"prodi",onChangeAction:i,mainTheme:n,value:t.prodi,title:"Program Studi",mr:3,setRequired:!0}),e.jsx(k,{arrayValue:x,idField:"jabatan_struktural_id",onChangeAction:i,mainTheme:n,value:t.jabatan_struktural_id,title:"Jabatan Struktural",mr:3,setRequired:!0})]}),e.jsxs(s,{display:t.status==="1"?"flex":"none",direction:["column","column","column","row"],children:[e.jsx(k,{arrayValue:m,idField:"jabatan_fungsional_id",value:t.jabatan_fungsional_id,onChangeAction:i,mainTheme:n,title:"Jabatan Fungsional",mr:3,setRequired:!0}),e.jsxs(L,{mt:1,mr:3,children:[e.jsx(z,{fontSize:"sm",children:"Status Serdos"}),e.jsxs(Ae,{borderRadius:"6px",placeholder:"Pilih",id:"status_serdos",size:"sm",onChange:i,value:t.status_serdos,bg:n.mainBg,isRequired:!0,children:[e.jsx("option",{value:"1",children:"SUDAH"}),e.jsx("option",{value:"0",children:"BELUM"})]})]})]})]})]}),e.jsxs(s,{width:"100%",mt:5,pb:5,px:3,justifyContent:"flex-end",children:[e.jsxs(D,{onClick:()=>{F(1)},size:"md",colorScheme:"blackAlpha",mr:2,children:[e.jsx(P,{icon:be})," Batal"]}),e.jsxs(D,{isDisabled:!oe,type:"submit",size:"md",colorScheme:"green",children:[p?"Simpan":"Tambahkan "," ",e.jsx(P,{icon:fe})]})]}),e.jsx(s,{width:"100%",justifyContent:"center",bg:n.primary,height:"max-content",py:1,color:n.boxBg,children:"Sistem Informasi Kepegawaian | UNUSIDA"})]})};export{tt as default};
