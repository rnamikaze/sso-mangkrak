import{r as m,j as e}from"./app-B5JuA1cy.js";import{g as O}from"./DateTools-DazUeWyn.js";import{o as X,e as N,s as Y,t as R,u as M,v as $,w as L,x as B,f as c}from"./index-CevUe-Si.js";import{F as x}from"./index.es-C_U1UPVr.js";import{a as q,r as k}from"./PensiFunctions-CxJ0VF9l.js";import Q from"./LoadingAnim-DKbh-9mv.js";import{F as r}from"./flex-D7MDlKee.js";import{B as h}from"./button-DOH4T2Pi.js";import{F as Z}from"./use-form-control-Dav_meEr.js";import{F as v}from"./form-label-CH8i2u-t.js";import{S as V}from"./switch-BUDMBC8R.js";import{T as D}from"./textarea-DdK4lyLt.js";/* empty css                          */import"./use-merge-refs-BMyyYqY7.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";const fe=({handleShowPengajuanViewerChange:l,userType:t,screenState:n,contentProp:a,showPengajuanViewer:i,pensiView:s,handlePensiViewChange:d,showToast:o})=>{const[g,f]=m.useState(!1),[p,_]=m.useState(!1),[b,y]=m.useState(["2024-01-01","2024-01-01"]),[w,F]=m.useState([]),[E,C]=m.useState([!1,!1]),K=()=>{f(u=>!u)},T=()=>{_(u=>!u)},U=(u,j,H,S,J=null)=>{C([!0,S]),axios.post("/sik/approve-pengajuan-action",{pengajuan_id:u,status_pengajuan:j,pengajuan_type:H,comment:J}).then(function(I){C([!1,S]),l(!1),I.data.success?o("Berhasil !","success"):o("Terjadi Kesalahan","warning")}).catch(function(I){o("AXIOS Error!","warning")})};return m.useEffect(()=>{if(a!=null){const u=JSON.parse(a.cuti_date_arr);if(y(u),a.pengajuan_type===2){const j=JSON.parse(a.file_pendukung_arr);F(j)}}},[a]),m.useEffect(()=>{f(!1)},[]),e.jsxs(r,{flexGrow:1,width:n<2?"100%":"55vw",borderLeft:"2px",borderBottom:"2px",border:n<2?"0px":null,borderLeftColor:"gray.300",borderBottomColor:"gray.300",pb:2,direction:"column",overflow:"hidden",bg:"white",children:[e.jsxs(r,{bg:"gray.100",fontWeight:"bold",alignItems:["flex-start","flex-start","center","center"],color:"#2f2f2f",fontSize:["13px","13px","15px","16px"],width:"100%",px:1,children:[n<2?e.jsx(r,{width:"40px",mr:4,py:1,color:"white",bg:"#48bb78",justifyContent:"center",alignItems:"center",onClick:()=>{l(!1)},height:"100%",cursor:"pointer",fontSize:"21px",children:e.jsx(x,{icon:X})}):e.jsxs(r,{width:"80px",mr:4,py:1,color:"white",bg:"#48bb78",justifyContent:"center",alignItems:"center",onClick:()=>{l(!1)},cursor:"pointer",children:[e.jsx(x,{icon:N})," ","  Tutup"]}),e.jsxs(r,{flexGrow:1,height:"100%",alignItems:"center",children:["Pengajuan"," ",a==null?"":e.jsx(e.Fragment,{children:parseInt(a.pengajuan_type)===1?"Cuti":"Izin"})]}),e.jsx(r,{pr:2,alignItems:"center",color:"gray.600",children:a==null?"":e.jsxs(e.Fragment,{children:[e.jsx(x,{icon:Y}),"  ",a.formatted_date]})})]}),a==null?e.jsx(r,{height:"100%",children:e.jsx(Q,{})}):e.jsxs(r,{flexGrow:1,px:3,pt:3,direction:"column",overflowX:"hidden",overflowY:"auto",bg:"white",height:"100vh",children:[e.jsxs(r,{direction:"column",flexGrow:1,children:[e.jsxs(r,{fontSize:["14px","14px","15px","17px"],mb:2,direction:"column",children:[e.jsx(r,{fontWeight:"bold",children:"Perihal:"}),a.pengajuan_type===1?e.jsxs(r,{alignItems:"center",children:[e.jsx(x,{style:{color:"#48bb78",marginRight:"10px"},icon:R}),"Cuti -"," ",q(a.cuti_type)]}):e.jsxs(r,{direction:"column",borderLeft:"2px",borderColor:"gray.300",pl:3,wordBreak:"break-all",children:[e.jsxs(r,{alignItems:"center",children:[e.jsx(x,{style:{color:"#cbd5e0",marginRight:"10px"},icon:R}),"Izin"]}),e.jsx(r,{children:a.deskripsi_izin})]})]}),a.pengajuan_type===1?e.jsxs(r,{fontSize:["14px","14px","15px","17px"],mb:4,direction:"column",children:[e.jsx(r,{fontWeight:"bold",children:"Penugasan: "}),e.jsxs(r,{children:[e.jsx(x,{style:{color:"teal",fontSize:"20px",marginRight:"5px"},icon:M}),a.name_pegawai_penugasan]})]}):"",e.jsxs(r,{direction:"column",px:3,pt:1,pb:2,bg:"gray.100",children:[e.jsxs(r,{fontWeight:"bold",mb:1,fontSize:["14px","14px","15px","17px"],children:["Tanggal"," "]}),e.jsx(r,{borderBottom:"2px",borderBottomColor:"gray.200",fontWeight:"bold",alignItems:"center",mb:g?3:0,pb:2,fontSize:["14px","14px","15px","17px"],children:e.jsxs(r,{alignItems:"center",children:[e.jsx(r,{bg:"green.100",px:3,borderRadius:"16px",children:b[0]}),e.jsxs(r,{children:[" "," ",e.jsx(x,{style:{position:"relative",top:"3px",margin:"0px 5px"},icon:$})," "," "]}),e.jsx(r,{bg:"green.100",px:3,borderRadius:"16px",children:b[b.length-1]})," ",e.jsx(r,{ml:3,color:"gray.600",onClick:K,cursor:"pointer",children:e.jsx(x,{icon:g?L:B})})]})}),e.jsx(r,{height:g?"100%":"0vh",maxHeight:g?"30vh":"0vh",overflowX:"hidden",overflowY:"auto",flexWrap:"wrap",fontSize:"14px",children:JSON.parse(a.cuti_date_arr).map((u,j)=>e.jsx(r,{bg:"green.100",px:3,borderRadius:"16px",mr:1,mb:2,height:"max-content",children:O(u,!0)},j))})]}),a.pengajuan_type===2?e.jsxs(r,{direction:"column",px:3,pt:1,pb:2,bg:"gray.100",borderTop:"2px",borderTopColor:"white",children:[e.jsxs(r,{fontWeight:"bold",mb:1,fontSize:["14px","14px","15px","17px"],children:["URL File Pendukung"," "]}),e.jsx(r,{borderBottom:"2px",borderBottomColor:"gray.200",fontWeight:"bold",alignItems:"center",mb:p?3:0,pb:2,fontSize:["14px","14px","15px","17px"],children:e.jsxs(r,{alignItems:"center",children:[e.jsx(r,{flexGrow:1,wordBreak:"break-all",bg:"green.100",px:3,py:2,borderRadius:"8px",fontSize:"14px",fontWeight:"normal",lineHeight:"1.1em",children:w[0]}),e.jsx(r,{ml:3,color:"gray.600",onClick:T,cursor:"pointer",width:"30px",minWidth:"30px",children:e.jsx(x,{icon:p?L:B})})]})}),e.jsx(r,{height:p?"100%":"0px",maxHeight:p?"100%":"0px",overflow:"hidden",flexWrap:"wrap",fontSize:"14px",children:w.map((u,j)=>e.jsx(r,{display:j===0?"none":"flex",bg:"green.100",px:3,py:2,borderRadius:"8px",fontSize:"14px",fontWeight:"normal",lineHeight:"1.1em",mr:1,mb:2,flexGrow:1,wordBreak:"break-all",children:u},j))})]}):"",e.jsxs(r,{direction:"column",width:"100%",fontSize:["14px","14px","15px","17px"],bg:k(a.status_pengajuan)[0],px:3,py:2,borderTop:"2px",borderTopColor:"white",mb:3,children:[e.jsx(r,{fontWeight:"bold",children:"Status Pengajuan"}),e.jsx(r,{borderBottom:"2px",borderBottomColor:k(a.status_pengajuan)[1],width:"100%",justifyContent:"flex-end",mb:1,pb:1,children:k(a.status_pengajuan)[2]})]}),parseInt(a.status_pengajuan)===8&&s===6?e.jsxs(r,{direction:"column",children:[e.jsx(r,{fontWeight:"bold",fontSize:["14px","14px","15px","17px"],children:"Alasan Pengajuan Ulang:"}),e.jsx(r,{fontSize:["13px","13px","14px","16px"],children:a.komentar})]}):""]}),t>0?e.jsx(A,{userType:t,pensiView:s,screenState:n,isDoingApproval:E,approveAction:U,contentProp:a,showToast:o}):""]})]})},A=({userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d})=>{switch(l){case 1:if(parseInt(s.status_pengajuan)===0&&t===5)return e.jsx(z,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d});if(parseInt(s.status_pengajuan)===6&&t===6)return e.jsx(G,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d});if(parseInt(s.status_pengajuan)===3&&t===6)return e.jsx(W,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d});case 2:if(parseInt(s.status_pengajuan)===2&&t===5)return e.jsx(P,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d});if(parseInt(s.status_pengajuan)===8&&t===6)return e.jsx(ee,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d});if(parseInt(s.status_pengajuan)===0&&t===8)return e.jsx(z,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d});if(parseInt(s.status_pengajuan)===6&&t===7)return e.jsx(G,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d});if(parseInt(s.status_pengajuan)===3&&t===7)return e.jsx(W,{userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d})}},z=({userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d})=>e.jsxs(r,{bottom:n<2?"0px":"2px",direction:["column","column","row","column"],mt:"20px",width:"100%",bg:"white",pb:[0,0,3,3],children:[e.jsxs(h,{colorScheme:"teal",borderRadius:"8px",mb:[2,2,0,2],flexGrow:1,mr:[0,0,2,2],onClick:()=>{i(s.id_pengajuan,2,s.pengajuan_type,!0)},isDisabled:a[0],children:["Setujui"," ",a[0]&&a[1]?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]}),e.jsxs(h,{flexGrow:1,maxWidth:["100%","100%","35%","100%"],colorScheme:"red",borderRadius:"8px",variant:"ghost",onClick:()=>{i(s.id_pengajuan,1,s.pengajuan_type,!1)},isDisabled:a[0],children:["Tolak"," ",a[0]&&a[1]===!1?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]})]}),W=({userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d})=>{const[o,g]=m.useState(!1),[f,p]=m.useState(`Dikarenakan mendesak, Saudara/i ${s.name_pengaju} sangat membutuhkan pengajuan ini...`),_=y=>{const w=y.target.value;p(w)},b=()=>{g(y=>!y)};return e.jsxs(r,{bottom:n<2?"0px":"2px",direction:["column","column","row","column"],mt:"20px",width:"100%",bg:"white",pb:[0,0,3,3],children:[e.jsxs(r,{mb:3,direction:"column",children:[e.jsxs(Z,{justifyContent:"flex-end",mb:1,display:"flex",alignItems:"center",children:[e.jsx(v,{htmlFor:"ajukan-lagi",mb:"0",children:"Ajukan Lagi?"}),e.jsx(V,{onChange:b,isChecked:o,id:"ajukan-lagi"})]}),o?e.jsx(D,{resize:"vertical",placeholder:"Alasan Pengajuan Lagi...",onChange:_,value:f}):""]}),o?e.jsxs(h,{colorScheme:"teal",borderRadius:"8px",mb:[2,2,0,2],flexGrow:1,mr:[0,0,2,2],onClick:()=>{i(s.id_pengajuan,8,s.pengajuan_type,!0,o?f:null)},isDisabled:a[0],children:["Ajukan Lagi"," ",a[0]&&a[1]?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]}):"",e.jsxs(h,{flexGrow:1,maxWidth:["100%","100%","35%","100%"],colorScheme:"red",borderRadius:"8px",variant:"ghost",onClick:()=>{i(s.id_pengajuan,4,s.pengajuan_type,!1,o?f:null)},isDisabled:a[0],children:["Terukan (Tolak)"," ",a[0]&&a[1]===!1?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]})]})},G=({userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d})=>e.jsx(r,{bottom:n<2?"0px":"2px",direction:["column","column","row","column"],mt:"20px",width:"100%",bg:"white",pb:[0,0,3,3],children:e.jsxs(h,{colorScheme:"teal",borderRadius:"8px",mb:[2,2,0,2],flexGrow:1,mr:[0,0,2,2],onClick:()=>{i(s.id_pengajuan,7,s.pengajuan_type,!0)},isDisabled:a[0],children:["Teruskan (Setujui)"," ",a[0]&&a[1]?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]})}),P=({userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d})=>e.jsxs(r,{bottom:n<2?"0px":"2px",direction:["column","column","row","column"],mt:"20px",width:"100%",bg:"white",pb:[0,0,3,3],children:[e.jsxs(h,{colorScheme:"teal",borderRadius:"8px",mb:[2,2,0,2],flexGrow:1,mr:[0,0,2,2],onClick:()=>{i(s.id_pengajuan,6,s.pengajuan_type,!0)},isDisabled:a[0],children:["Setujui"," ",a[0]&&a[1]?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]}),e.jsxs(h,{flexGrow:1,maxWidth:["100%","100%","35%","100%"],colorScheme:"red",borderRadius:"8px",variant:"ghost",onClick:()=>{i(s.id_pengajuan,3,s.pengajuan_type,!1)},isDisabled:a[0],children:["Tolak"," ",a[0]&&a[1]===!1?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]})]}),ee=({userType:l,pensiView:t,screenState:n,isDoingApproval:a,approveAction:i,contentProp:s,showToast:d})=>e.jsxs(r,{bottom:n<2?"0px":"2px",direction:["column","column","row","column"],mt:"20px",width:"100%",bg:"white",pb:[0,0,3,3],children:[e.jsxs(h,{colorScheme:"teal",borderRadius:"8px",mb:[2,2,0,2],flexGrow:1,mr:[0,0,2,2],onClick:()=>{i(s.id_pengajuan,7,s.pengajuan_type,!0)},isDisabled:a[0],children:["Setujui"," ",a[0]&&a[1]?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]}),e.jsxs(h,{flexGrow:1,maxWidth:["100%","100%","35%","100%"],colorScheme:"red",borderRadius:"8px",variant:"ghost",onClick:()=>{i(s.id_pengajuan,3,s.pengajuan_type,!1)},isDisabled:a[0],children:["Tolak"," ",a[0]&&a[1]===!1?e.jsx(x,{style:{marginLeft:"10px"},spin:!0,icon:c}):""]})]});export{fe as default};
