import{r,j as e}from"./app-B5JuA1cy.js";import{h as U,i as _,f as G}from"./index-DjOUsMDD.js";import{o as M,n as E,f as F,al as H,a7 as X,am as q,an as J}from"./index-CevUe-Si.js";import{F as l}from"./index.es-C_U1UPVr.js";import{F as s}from"./flex-D7MDlKee.js";import{B as f}from"./button-DOH4T2Pi.js";import{F as Q}from"./use-form-control-Dav_meEr.js";import{I as Y}from"./input-D2cIcRAO.js";import{u as Z}from"./use-boolean-zvpXrp5i.js";import"./use-merge-refs-BMyyYqY7.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";const o=["6%","54%","40%","10%"],pe=({colorTheme:n,allUserList:h=null,showToast:c})=>{const[i,a]=r.useState([]),[x,d]=r.useState([]),[p,y]=r.useState(!1),[w,k]=r.useState(!1),[C,m]=r.useState(""),[g,b]=r.useState(!1),[S,v]=r.useState(!1),[L,j]=r.useState(!1),B=t=>{const u=t.target.value;m(u)},[R,I]=r.useState(!1),[D,z]=r.useState(!1),[W,P]=r.useState(!1),K=()=>{I(!0),axios.post("/unlock-reset-password-button",{user_id:i[0].id,password:C}).then(function(t){I(!1),t.data.pass_match?b(!0):c("error","Password Superadmin Salah !")}).catch(function(t){})},N=()=>{z(!0),axios.post("/do-reset-password-super",{user_id:i[0].id}).then(function(t){z(!1),t.data.success?(c("success","Berhasil Reset Password !"),j(!1)):(c("error","Password Superadmin Salah !"),j(!1))}).catch(function(t){})},O=t=>{const u=t[0];t[1],y(A=>!A),a([x[u]])},V=()=>{P(!0),axios.post("/get-all-users",{by:"@rnamikaze"}).then(function(t){setTimeout(()=>{P(!1)},1e3),t.data.success?(a(t.data.allUserList),d(t.data.allUserList)):(a([]),d([]))}).catch(function(t){})};return r.useEffect(()=>{V(),m("")},[]),e.jsxs(s,{direction:"column",children:[e.jsx(s,{width:"100%",children:e.jsxs(s,{border:"2px",borderColor:p?"gray.200":"transparent",mb:p?3:0,borderRadius:"6px",width:"100%",height:p?w?["350px","350px","275px","275px"]:["150px","150px","110px","110px"]:"0px",transition:"500ms ease-out",direction:"column",overflow:"hidden",transitionDelay:"500ms",children:[e.jsxs(s,{width:"100%",children:[e.jsxs(s,{color:"white",fontWeight:"bold",letterSpacing:"2px",textTransform:"uppercase",bg:n.text,px:3,py:1,justifyContent:"center",fontSize:["15px","15px","17px","17px"],flexGrow:1,children:["Reset"," "]}),e.jsx(s,{justifyContent:"flex-end",children:e.jsx(f,{borderRadius:"0px",size:"md",colorScheme:"red",height:"100%",px:4,onClick:()=>{y(!1),a(x),m(""),k(!1),b(!1),j(!1)},children:e.jsx(l,{icon:M})})})]}),e.jsxs(s,{direction:"column",px:2,pt:2,children:[e.jsxs(s,{fontSize:"16px",children:["Username:"," ",e.jsx(s,{ml:2,children:p?e.jsx("div",{style:{fontWeight:"bold"},children:i[0].name}):e.jsxs(e.Fragment,{children:["Oke  ",e.jsx(l,{style:{color:n.primary},icon:E})]})})]}),e.jsxs(s,{mb:2,py:1,justifyContent:"space-between",fontSize:"14px",width:"100%",direction:["column","column","row","row"],children:[e.jsxs(s,{children:["Terakhir Reset:  ",p?i[0].last_edit:e.jsxs(e.Fragment,{children:["Oke  ",e.jsx(l,{style:{color:n.primary},icon:E})]})]}),e.jsx(s,{justifyContent:"flex-end",pl:2,width:["100%","100%","10%","10%"],mt:2,children:e.jsxs(f,{colorScheme:n.btnScheme.primary,size:"sm",variant:"link",onClick:()=>{k(t=>!t),b(!1),m(""),j(!1)},children:[w?"Tutup":"Reset"," "]})})]}),e.jsxs(s,{direction:"column",height:w?"210px":"0px",overflow:"hidden",transition:"500ms ease-out",children:[e.jsxs(s,{children:[e.jsx(s,{flexGrow:1,mb:1,children:e.jsxs(Q,{children:[e.jsxs(s,{direction:["column","column","row","row"],width:"100%",children:[e.jsx(s,{mb:1,fontSize:["14px","14px","16px","16px"],flexGrow:1,fontWeight:"bold",children:"Masukan Password Superadmin"}),e.jsxs(s,{fontSize:["10px","10px","13px","13px"],alignItems:"center",color:"teal.600",cursor:"pointer",pl:1,onClick:()=>{v(t=>!t)},width:"100%",justify:"flex-end",children:[e.jsx(l,{icon:S?U:_})," ",S?"Sembunyikan":"Tampilkan"]})]}),e.jsx(Y,{borderRadius:"6px",size:"sm",type:S?"text":"password",onChange:B,value:C,isReadOnly:g})]})}),g?"":e.jsx(s,{ml:2,alignItems:"flex-end",children:e.jsx(f,{onClick:()=>{R===!1&&K()},size:"sm",colorScheme:"teal",children:R?e.jsxs(e.Fragment,{children:["Proses  ",e.jsx(l,{spin:!0,icon:F})]}):"Unlock"})})]}),e.jsx(T,{doResetPassword:N,resetUnlocked:g,isResetingPassword:D,userData:i,passwordResetSuccess:L})]})]})]})}),e.jsxs(s,{direction:"column",px:2,py:2,border:"2px",borderColor:n.border,borderRadius:"6px",boxShadow:"sm",className:"titillium-web-regular",mb:"30px",color:n.heading,children:[e.jsxs(s,{direction:"row",borderBottom:"2px",borderColor:n.border,px:[0,0,1,1],mb:2,fontWeight:"bold",fontSize:["13px","13px","16px","16px"],children:[e.jsx(s,{width:o[0],children:"No."}),e.jsx(s,{width:o[1],children:"Nama"}),e.jsx(s,{width:o[2],children:"NIK"}),e.jsx(s,{width:o[3],children:"Aksi"})]}),W?e.jsx(e.Fragment,{children:e.jsx(s,{py:2,justifyContent:"center",children:e.jsx("div",{id:"dash-small-loader"})})}):e.jsx(e.Fragment,{children:i.length>0?e.jsx(e.Fragment,{children:i.map((t,u)=>e.jsx($,{row:t,index:u,colorTheme:n,toggleViewResetPane:O,viewResetPane:p}))}):e.jsx(e.Fragment,{children:e.jsx(s,{justifyContent:"center",children:"Kosong"})})})]})]})},$=({row:n,index:h,colorTheme:c,toggleViewResetPane:i,viewResetPane:a})=>{r.useState(!1);const x=d=>{i(d)};return e.jsx(s,{direction:"column",children:e.jsxs(s,{direction:"row",px:[0,0,1,1],py:1,mb:1,fontSize:["12px","12px","15px","15px"],children:[e.jsx(s,{width:o[0],fontWeight:"bold",justifyContent:"flex-start",children:h+1}),e.jsx(s,{width:o[1],maxWidth:o[1],wordBreak:"break-word",children:n.name}),e.jsx(s,{width:o[2],maxWidth:o[2],wordBreak:"break-all",children:n.nik}),e.jsx(s,{width:o[3],maxWidth:o[3],wordBreak:"break-word",children:e.jsx(f,{color:c.primary,size:"sm",variant:"link",fontSize:["12px","12px","18px","18px"],onClick:()=>{a===!1&&x([h,n.id])},children:e.jsx(l,{spin:a,icon:a?H:X})})})]})})},T=({resetUnlocked:n,doResetPassword:h,isResetingPassword:c,userData:i,passwordResetSuccess:a})=>{const[x,d]=Z(!1);return e.jsx(s,{justifyContent:"center",alignItems:"center",height:["170px","170px","140px","140px"],mt:"5px",children:e.jsxs(s,{height:"100%",width:"100%",justifyContent:"center",alignItems:"center",position:"relative",direction:"column",children:[e.jsxs(s,{position:"absolute",bg:n?"green.500":"#fc8181c1",zIndex:n?-1:20,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",color:"white",fontWeight:"bold",letterSpacing:"2px",fontSize:"20px",onMouseEnter:d.on,onMouseLeave:d.off,opacity:n?0:x?.2:1,transition:n?"100ms ease-out":"500ms ease-out",transitionDelay:n?"1s":"0s",cursor:"pointer",borderRadius:"6px",children:[n?"UNLOCKED":"LOCKED","  ",e.jsx(l,{icon:q})]}),a?e.jsxs(s,{bg:"gray.200",px:3,py:1,alignItems:"center",children:["NIK: ",e.jsx("strong",{children:i[0].nik})," - OK  ",e.jsx(l,{icon:G})]}):e.jsxs(f,{onClick:h,colorScheme:"red",borderRadius:"0px",children:["RESET  ",e.jsx(l,{spin:c,icon:c?F:J})]}),e.jsx(s,{fontSize:"12px",mt:2,children:"Aksi Reset akan mengubah Password ke pengaturan awal [NIK]"})]})})};export{pe as default};
