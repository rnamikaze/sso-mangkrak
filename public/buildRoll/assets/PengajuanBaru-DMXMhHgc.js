import{r as s,j as e}from"./app-B5JuA1cy.js";import{g as M,c as P,d as B}from"./DateTools-DazUeWyn.js";import{T as K,aN as L,aO as R,l as U}from"./index-CevUe-Si.js";import{F as y}from"./index.es-C_U1UPVr.js";import J from"./LoadingAnim-DKbh-9mv.js";import{F as a}from"./flex-D7MDlKee.js";import{H as O}from"./heading-C_DZVkp8.js";import{F as c,c as _}from"./use-form-control-Dav_meEr.js";import{F as d}from"./form-label-CH8i2u-t.js";import{S as N}from"./select-CfXo8taG.js";import{S as E}from"./switch-BUDMBC8R.js";import{I as v}from"./input-D2cIcRAO.js";import{B as T}from"./button-DOH4T2Pi.js";import{T as q}from"./textarea-DdK4lyLt.js";/* empty css                          */import"./use-merge-refs-BMyyYqY7.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";const he=({showToast:g,handlePensiViewChange:x})=>{const[p,h]=s.useState(null),[m,b]=s.useState(!1),C=o=>{const l=parseInt(o.target.value);h(isNaN(l)?null:l)},w=()=>{switch(p){case 1:return e.jsx(G,{showToast:g,pengajuanType:p,handlePensiViewChange:x,setIsShowLoading:b});case 2:return e.jsx(W,{showToast:g,pengajuanType:p,handlePensiViewChange:x,setIsShowLoading:b});default:return e.jsxs(a,{px:3,py:1,fontSize:["20px","20px","25px","25px"],justifyContent:"center",alignItems:"center",width:"100%",height:"150px",color:"gray.500",direction:"column",children:[e.jsx(y,{icon:K}),e.jsx(a,{children:"Pilih Pengajuan"})]})}};return e.jsxs(a,{position:"relative",flexGrow:1,direction:"column",children:[m?e.jsx(a,{width:"100%",height:"100%",bg:"gray.100",position:"absolute",top:"0px",left:"0px",zIndex:30,justifyContent:"center",alignItems:"center",children:e.jsx(J,{text:"mengirim"})}):"",e.jsx(O,{py:2,as:"h3",fontSize:"19px",color:"gray.600",fontWeight:"bold",letterSpacing:"1px",className:"lato-regular",children:"Pengajuan Cuti/Izin Baru"}),e.jsxs(a,{direction:"column",children:[e.jsx(a,{bg:"gray.100",borderBottom:"2px",borderColor:"gray.300",children:e.jsx(a,{px:3,py:2,width:["100%","100%","300px","300px"],children:e.jsxs(c,{children:[e.jsx(d,{children:"Pilih Pengajuan"}),e.jsxs(N,{borderRadius:"6px",size:"md",placeholder:"Pilih Pengajuan",onChange:C,bg:"white",children:[e.jsx("option",{value:"1",children:"Pengajuan Cuti"}),e.jsx("option",{value:"2",children:"Pengajuan Izin"})]})]})})}),e.jsx(a,{mt:2,bg:"gray.100",borderBottom:"2px",borderColor:"gray.300",mb:"20px",children:w()})]})]})},G=({pengajuanType:g,showToast:x,handlePensiViewChange:p,setIsShowLoading:h})=>{const[m,b]=s.useState(null),[C,w]=s.useState([2,3,90,2,2,2,2,2,1,18,40]),[o,l]=s.useState(M()),[k,j]=s.useState(M()),[S,A]=s.useState(!1),[I,z]=s.useState(null),[F,H]=s.useState([]),i=t=>{const r=parseInt(t.target.value);b(isNaN(r)?null:r),l(M()),j(o),A(!1)},n=t=>{const r=parseInt(t.target.value);z(isNaN(r)?null:r)},f=()=>{switch(m){case 1:return"Maksimal 2 Hari per Bulan dalam 1 Tahun";case 2:return"Maksimal 3 Hari";case 3:return"Maksimal 3 Bulan";case 4:return"Maksimal 2 Hari";case 5:return"Maksimal 2 Hari";case 6:return"Maksimal 2 Hari";case 7:return"Maksimal 2 Hari";case 8:return"Maksimal 2 Hari";case 9:return"Maksimal 1 Hari";case 10:return"Maksimal 18 Hari";case 11:return"Maksimal 40 Hari";default:return"NULL"}},u=()=>{h(!0);const t=B(o,k),r={cutiType:m,cutiDateArr:JSON.stringify(t),pengajuanType:g,idPegawaiPenugasan:I};axios.post("/sik/send-pengajuan",r).then(function(D){D.data.success?(setTimeout(()=>{h(!1),p(2)},2e3),x(D.data.message,"success")):x(D.data.message,"warning")}).catch(function(D){x("Axios Error, See Browser Log","warning")})};return s.useEffect(()=>{axios.post("/sik/get-kawan-seunit",{by:"@rnamikaze"}).then(function(t){H(t.data.allKawan)}).catch(function(t){}),j(M())},[]),e.jsxs(a,{px:3,py:2,width:"100%",direction:"column",children:[e.jsxs(c,{width:"100%",children:[e.jsx(d,{mb:1,pb:0,children:"Pengajuan Cuti"}),e.jsxs(N,{width:"100%",mt:0,borderRadius:"6px",size:"md",placeholder:"Pilih Pengajuan",bg:"white",onChange:i,children:[e.jsx("option",{value:"1",children:"Cuti Reguler"}),e.jsx("option",{value:"2",children:"Cuti Menikah"}),e.jsx("option",{value:"3",children:"Cuti Melahirkan"}),e.jsx("option",{value:"4",children:"Cuti Pernikahan Anak"}),e.jsx("option",{value:"5",children:"Cuti Khitan Anak"}),e.jsx("option",{value:"6",children:"Cuti Istri Sah Melahirkan"}),e.jsx("option",{value:"7",children:"Cuti Istri Sah Keguguran"}),e.jsx("option",{value:"8",children:"Cuti Keluarga Meninggal"}),e.jsx("option",{value:"9",children:"Cuti Pernikahan Kakak atau Adik Kandung"}),e.jsx("option",{value:"10",children:"Cuti Ibadah Umrah"}),e.jsx("option",{value:"11",children:"Cuti Ibadah Haji"})]}),e.jsx(_,{children:m===null?"Pilih Jenis Cuti.":f()})]}),m===null?"":e.jsxs(a,{direction:"column",children:[e.jsxs(a,{direction:["column","column","row","row"],children:[e.jsxs(c,{width:["100%","100%","50%","50%"],mt:2,mr:3,children:[e.jsxs(a,{width:"100%",justifyContent:"space-between",children:[e.jsx(d,{mb:1,pb:0,flexGrow:1,children:"Pilih Tanggal Mulai"}),e.jsxs(c,{display:"flex",alignItems:"center",width:"max-content",children:[e.jsx(d,{htmlFor:"email-alerts",mb:"0",children:"Sampai?"}),e.jsx(E,{isChecked:S,onChange:()=>{A(t=>!t),S&&j(o)},colorScheme:"green",id:"email-alerts"})]})]}),e.jsx(v,{min:P(4),value:o,bg:"white",type:"date",onChange:t=>{const r=t.target.value;l(r),j(r)}})]}),e.jsxs(c,{width:["100%","100%","50%","50%"],mt:2,children:[e.jsx(d,{mb:1,pb:0,children:"Pilih Tanggal Terakhir"}),e.jsx(v,{min:o,max:P(C[m-1]-1,o),value:k,isDisabled:!S,bg:"white",type:"date",onChange:t=>{const r=t.target.value;j(r)}})]})]}),e.jsx(a,{mt:4,children:e.jsxs(c,{children:[e.jsx(d,{mb:1,pb:0,children:"Pilih Penugasan"}),e.jsx(N,{onChange:n,bg:"white",placeholder:"Pilih Pegawai",children:F.map((t,r)=>e.jsx("option",{value:t.master_id,children:t.fullname},r))})]})}),I!==null?e.jsx(a,{mt:"20px",width:"100%",justifyContent:"flex-end",children:e.jsxs(T,{onClick:u,colorScheme:"blue",children:["Ajukan  ",e.jsx(y,{icon:L})]})}):""]})]})},W=({showToast:g,handlePensiViewChange:x,setIsShowLoading:p})=>{const[h,m]=s.useState(P(0)),[b,C]=s.useState(P(0)),[w,o]=s.useState(!1);s.useState(!1);const[l,k]=s.useState([""]),[j,S]=s.useState(""),A=()=>{k([...l,""])},I=i=>{const n=l.filter((f,u)=>u!==i);k(n)},z=i=>{const n=i.target.value;S(n)},F=(i,n)=>{const f=i.target.value,u=l.map((t,r)=>r===n?f:t);k(u)},H=i=>{i.preventDefault(),p(!0);const n=B(h,b),f={cuti_date_arr:JSON.stringify(n),deskripsi_izin:j,file_pendukung_arr:JSON.stringify(l),by:"@rnamikaze"};axios.post("/sik/send-pengajuan-izin",f).then(function(u){u.data.success?(setTimeout(()=>{p(!1),x(2)},2e3),g(u.data.message,"success")):g(u.data.message,"warning")}).catch(function(u){g("Axios Error, See Browser Log","warning")})};return e.jsxs(a,{as:"form",onSubmit:H,px:3,py:2,width:"100%",direction:"column",children:[e.jsxs(a,{direction:["column","column","row","row"],children:[e.jsxs(c,{width:["100%","100%","50%","50%"],mt:2,mr:3,children:[e.jsxs(a,{width:"100%",justifyContent:"space-between",children:[e.jsx(d,{mb:1,pb:0,flexGrow:1,children:"Pilih Tanggal Mulai"}),e.jsxs(c,{display:"flex",alignItems:"center",width:"max-content",children:[e.jsx(d,{htmlFor:"email-alerts",mb:"0",children:"Sampai?"}),e.jsx(E,{isChecked:w,onChange:()=>{o(i=>!i),w&&C(h)},colorScheme:"green",id:"email-alerts"})]})]}),e.jsx(v,{min:P(),value:h,bg:"white",type:"date",onChange:i=>{const n=i.target.value;m(n),C(n)},required:!0})]}),e.jsxs(c,{width:["100%","100%","50%","50%"],mt:2,children:[e.jsx(d,{mb:1,pb:0,children:"Pilih Tanggal Terakhir"}),e.jsx(v,{min:h,value:b,isDisabled:!w,bg:"white",type:"date",onChange:i=>{const n=i.target.value;C(n)}})]})]}),e.jsxs(c,{mt:3,children:[e.jsx(d,{mb:1,pb:0,children:"Deskripsi Izin"}),e.jsx(q,{bg:"white",placeholder:"Tulis alasan pengajuan izin.",resize:"vertical",rows:5,minLength:50,required:!0,value:j,onChange:z}),e.jsx(_,{children:"Sedetail mungkin."})]}),e.jsxs(a,{mt:3,direction:"column",children:[e.jsx(a,{fontWeight:"bold",mb:1,fontSize:"15px",children:"Link/URL File Pendukung"}),l.map((i,n)=>e.jsxs(a,{mb:1,children:[e.jsx(v,{placeholder:"https://drive.google.com/file_pendukung",bg:"white",type:"text",minLength:15,onChange:f=>{F(f,n)},value:l[n],required:!0}),n<1?"":e.jsx(T,{onClick:()=>{I(n)},ml:1,colorScheme:"red",children:e.jsx(y,{icon:R})})]},n)),e.jsx(a,{mt:2,justifyContent:"flex-end",children:e.jsxs(T,{width:"100px",colorScheme:"facebook",onClick:A,isDisabled:l[l.length-1].length<15,children:["Tambah ",e.jsx(y,{icon:U})]})})]}),e.jsx(a,{mt:2,children:e.jsxs(T,{type:"submit",colorScheme:"blue",children:["Ajukan  ",e.jsx(y,{icon:L})]})})]})};export{he as default};
