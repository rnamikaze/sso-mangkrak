import{r as t,j as s,Y as A,y as K}from"./app-B5JuA1cy.js";import"./index.es-C_U1UPVr.js";import{y as Q}from"./index-CevUe-Si.js";import{P as q,a as D}from"./PrimaryLoadingPlain-3fu1NPeT.js";import O from"./GuestHead-C-etNJnH.js";import W from"./BodyGuest-kt1yWKyK.js";import Y from"./Footer-AkQZtU5c.js";import H from"./LoginBG-BQKNjjUu.js";import{F as J}from"./flex-D7MDlKee.js";import{B as M}from"./box-DNXXPAzx.js";import"./index-DC_UkMCT.js";import"./heading-C_DZVkp8.js";import"./use-form-control-Dav_meEr.js";import"./use-merge-refs-BMyyYqY7.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";import"./form-label-CH8i2u-t.js";import"./button-DOH4T2Pi.js";import"./text-vcTeec7L.js";import"./stack-6c9C4MON.js";import"./responsive-DAp-FYNV.js";import"./children-BZqQFmTZ.js";import"./index-DjOUsMDD.js";import"./QrCodeDisplay-DeToLyNc.js";import"./select-CfXo8taG.js";import"./button-group-MZo9KVg_.js";import"./textarea-DdK4lyLt.js";import"./use-boolean-zvpXrp5i.js";const Bt=({personDataGuest:a,unitsGuest:m,currentHost:o="https://app.unusida.ac.id/sku",filterUnitId:i=null})=>{const[S,g]=t.useState(0),[b,B]=t.useState(!0),[C,h]=t.useState(!1),[E,U]=t.useState(null),[r,d]=t.useState(null),[x,y]=t.useState(""),[c,n]=t.useState(""),[V,v]=t.useState(!0),[I,L]=t.useState(!1),[_,p]=t.useState("https://app.unusida.ac.id/sku"),[u,F]=t.useState(null),[P,j]=t.useState("Pilih unit dulu..."),R=()=>{let e="",f=u.filter(l=>l.id==r);try{e=`${o}/sku/unit/${f[0].alias}`}catch{e=`${o}/sku`}p(e)};function T(e){e.preventDefault(),c.length>=1&&(K.post("/sku/send-survey",{nama_id:c,kode_unit_id:r,level_survey_id:S,komentar:x}),n(""),d(null),y(""),g(0),L(!0),setTimeout(()=>{L(!1)},2e3))}const $=e=>{n(0),j(e.target.options[e.target.selectedIndex].text.toLowerCase()),d(e.target.value)},G=e=>{B(e),setTimeout(()=>{v(!1)},1500)},N=e=>{g(e)},z=t.useCallback(()=>{a&&U(a)},[a]);return t.useEffect(()=>{z()},[a]),t.useEffect(()=>{let e=null;m===void 0?h(!1):(h(!0),e=m.sort((f,l)=>{const k=String(f.nama_unit).charAt(0).toLowerCase(),w=String(l.nama_unit).charAt(0).toLowerCase();return k>w?1:k<w?-1:0}),F(e))},[m]),t.useEffect(()=>{i!==null&&(n(0),j(i[1]),d(parseInt(i[0])),p(`${o}/sku/unit/${i[2]}`))},[i]),t.useEffect(()=>{u!==null&&R()},[r,u]),t.useEffect(()=>{p(o+"/sku")},[o]),t.useEffect(()=>{v(!0)},[]),s.jsxs(s.Fragment,{children:[s.jsx(A,{children:s.jsx("title",{children:"Survei Kepuasan Unit"})}),s.jsxs(J,{position:"relative",width:"100vw",boxSizing:"border-box",minHeight:"100vh",direction:"column",bg:"#97c4ab",children:[s.jsx(H,{setIsBgLoaded:G,showBlur:!1}),s.jsx(M,{width:"100%",height:"100%",position:"absolute",left:"0px",zIndex:2,className:"bg-glass-5"}),s.jsx(O,{}),C?s.jsx(W,{qrCodeUrl:_,handleSubmit:T,unitsGuest:u,changeUnit:$,namaId:c,setNamaId:n,tempData:E,selectedSatisfyLevel:S,changeSelectedSatisfyLevel:N,setKomentar:y,komentar:x,selectedUnit:r,selectedUnitName:P}):"",s.jsx(Y,{})]}),s.jsx(q,{isHidden:b,showCopyRight:!0}),s.jsx(D,{isHidden:!I,customIcon:Q,isBounce:!0,showWarning:!1,hText:"Berhasil dikirim, tunggu...",showCopyRight:!0})]})};export{Bt as default};
