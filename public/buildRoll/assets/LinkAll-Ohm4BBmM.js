import{r as a,j as e}from"./app-B5JuA1cy.js";import{F as k}from"./index.es-C_U1UPVr.js";import{az as R,r as _}from"./index-CevUe-Si.js";import"./index-CdkGED-Z.js";import v from"./InfinteScroll-DLhafHFM.js";import z from"./SearchView-CfNKOM3_.js";import{F as r}from"./flex-D7MDlKee.js";import{B as K}from"./button-DOH4T2Pi.js";import{I as B}from"./input-D2cIcRAO.js";import"./LinkItem-C3GyfdR7.js";import"./index-DjOUsMDD.js";import"./Clickable-p5btVmg-.js";import"./text-vcTeec7L.js";import"./use-boolean-zvpXrp5i.js";import"./box-DNXXPAzx.js";import"./use-merge-refs-BMyyYqY7.js";import"./attr-sHTFgF0E.js";import"./use-form-control-Dav_meEr.js";import"./call-all-DDzecCnU.js";const ct=({allDataLinks:A,changeViewActive:u,showPopUp:p,isFromAccountManagement:b=!1,userActive:i,viewModeSetting:w,settingMode:J})=>{a.useState(!0);const[d,I]=a.useState(!0),[L,C]=a.useState(""),[o,c]=a.useState([]),[x,h]=a.useState(1),[N,D]=a.useState(1),[l,O]=a.useState(w),[F,f]=a.useState(!1),[g,m]=a.useState(null),[S,j]=a.useState(!0),y=()=>{l===1&&axios.post("/usl/get-links",{page:x,id:g}).then(function(t){f(!1),parseInt(t.data.maxPage)!==1&&(h(s=>s+=1),c([...o,...t.data.links]))}).catch(function(t){setTimeout(()=>{f(!1),alert("Kendala Jaringan!")},1e4)})},E=()=>{let t=o.slice();d?t.sort((s,n)=>new Date(s.created_at)<new Date(n.created_at)):t.sort((s,n)=>new Date(s.created_at)>new Date(n.created_at)),c(t)};a.useEffect(()=>{E()},[d]),a.useEffect(()=>{i!==void 0&&i!==null&&m(i[0])},[i]);const P=(t=null)=>{let s=t;t===null&&(s=g),axios.post("/usl/get-links",{page:x,id:s}).then(function(n){h(M=>M+=1),c([...n.data.links]),D(n.data.maxPage),j(!1)}).catch(function(n){})},T=()=>{switch(l){case 0:return e.jsxs(r,{py:2,borderRadius:"6px",direction:"column",children:[e.jsx(B,{size:"sm",bg:"white",borderRadius:"6px",placeholder:"Cari sesuatu...",value:L,onChange:t=>{C(t.target.value)}}),e.jsx(r,{mt:2,justifyContent:"flex-end",children:e.jsxs(r,{bg:"green.400",color:"white",borderRadius:"6px",px:2,width:"max-content",height:"30px",justifyContent:"center",alignItems:"center",boxShadow:"base",cursor:"pointer",fontWeight:"bold",onClick:()=>{I(t=>!t)},children:[e.jsx(k,{icon:_}),"   ",d?"Terbaru":"Terlama"]})}),e.jsx(z,{isFirstLoad:S,showPopUp:p,tempLinks:o,changeViewActive:u})]});case 1:return e.jsx(v,{isFirstLoad:S,tempLinks:o,changeViewActive:u,callNextLinks:y,showPopUp:p,setIsLoadingLink:f,isLoadingLink:F})}};a.useEffect(()=>{l===1&&axios.post("/usl/get-user-info").then(function(t){m(t.data[0]),P(t.data[0])}).catch(function(t){}),l===0&&axios.post("/usl/get-user-info").then(function(t){m(t.data[0]),axios.post("/usl/get-links-old").then(function(s){c(s.data),j(!1)}).catch(function(s){})}).catch(function(t){})},[]);try{return e.jsx(e.Fragment,{children:e.jsxs(r,{direction:"column",children:[b?e.jsx(r,{width:"100%",mb:3,children:e.jsxs(K,{onClick:()=>{u(10)},colorScheme:"blackAlpha",size:"sm",variant:"outline",children:[e.jsx(k,{icon:R})," "," Kembali"]})}):"",T()]})})}catch{return e.jsx("div",{children:"Tunggu"})}};export{ct as default};
