import{r,j as e}from"./app-B5JuA1cy.js";import P from"./PdfTwo-BGb1Pyav.js";import{F as u}from"./index.es-C_U1UPVr.js";import{f as x}from"./index-CevUe-Si.js";import{B as k,b as F}from"./PDFOnly-FPnPl1GX.js";import v from"./PdfBlobProvider-DOaQJ6sw.js";import{F as s}from"./flex-D7MDlKee.js";import{B as I}from"./button-DOH4T2Pi.js";import{T as R}from"./text-vcTeec7L.js";import"./server.browser-VgaQQB4P.js";import"./typeof-BVQB8lKn.js";import"./logo_unu_primary_green_small-hbguD8Ld.js";import"./use-merge-refs-BMyyYqY7.js";import"./attr-sHTFgF0E.js";const X=({actualData:T,filename:C,setActiveView:h,arrLog:b,pushArrLog:g,clearArrLog:j,passerData:d})=>{const[m,z]=r.useState(!1),[o,p]=r.useState(0),[t,w]=r.useState([]),[S,B]=r.useState(!1),[l,_]=r.useState(null),[i,c]=r.useState(!1),y=async a=>{try{c(!0);const n=new FormData;n.append("file",a),n.append("name",t[o].rn_name),n.append("email",t[o].rn_email),n.append("bank_rek",t[o].rn_nama_buku_tabungan),n.append("no_rek",t[o].rn_no_rek),n.append("no",t[o].rn_no),n.append("jabatan",t[o].rn_jabatan);const f=await axios.post("/aslip/send-mail",n,{headers:{"Content-Type":"multipart/form-data"}});f.data.status===200?(g(data.rn_email),p(E=>E+1)):console.error("Error sending blob. Status:",f.status),c(!1)}catch(n){console.error("Error sending blob:",n),c(!1)}};r.useEffect(()=>{l&&!i&&y(l)},[l,i]);const D=()=>{for(let a=0;a<t.length;a++)p(a),k,F,t[o]};r.useEffect(()=>{i||D()},[t,o,i]),r.useEffect(()=>{w(d)},[d]),r.useEffect(()=>{setTimeout(()=>{B(!0)},1500)},[]);try{return e.jsx(e.Fragment,{children:t!==void 0&&t.length>0?e.jsxs(s,{width:"77vw",height:"max-content",borderRadius:"15px",bg:"white",px:4,pt:1,pb:4,direction:"column",position:"relative",children:[e.jsx(P,{targetData:t[o],incrementBtn:null,decrementBtn:null,formatedData:t}),S===!1?e.jsxs(s,{top:"0px",left:"0px",position:"absolute",width:"100%",height:"100%",bg:"#38a169ac",zIndex:50,borderRadius:"15px",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",letterSpacing:"2px",children:[e.jsx(u,{icon:x,spin:!0}),"   Menyiapkan..."]}):"",e.jsxs(s,{mb:3,position:"relative",justifyContent:"space-between",children:[e.jsxs(s,{children:[e.jsx(v,{data:t[o],loopSend,disBtn:m}),e.jsx(I,{colorScheme:"green",width:"max-content",onClick:()=>{h(0),j()},ml:2,size:"sm",children:"Kembali"})]}),m?e.jsxs(s,{ml:2,color:"#2f2f2f",fontWeight:"bold",px:3,alignItems:"center",bg:"blue.100",children:["Mengirim",e.jsx(u,{icon:x,spin:!0})]}):""]}),e.jsx(R,{fontSize:"20px",fontWeight:"bold",children:"Log:"}),e.jsxs(s,{bg:"black",borderRadius:"6px",width:"100%",height:"max-content",color:"white",px:3,py:2,direction:"column",children:["... ",e.jsx("br",{}),b.map((a,n)=>e.jsx(s,{direction:"column",children:a},n))]})]}):""})}catch{return e.jsx(s,{color:"white",children:"Hehe"})}};export{X as default};
