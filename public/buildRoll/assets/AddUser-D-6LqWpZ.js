import{r as d,j as e,y as I}from"./app-B5JuA1cy.js";import{F as S}from"./index.es-C_U1UPVr.js";import{o as z}from"./index-CevUe-Si.js";import"./TextInput-Qae2CqtW.js";import{F as l}from"./flex-D7MDlKee.js";import{H as T}from"./heading-C_DZVkp8.js";import{B}from"./box-DNXXPAzx.js";import{F as o,c as M}from"./use-form-control-Dav_meEr.js";import{F as t}from"./form-label-CH8i2u-t.js";import{I as i}from"./input-D2cIcRAO.js";import{B as w}from"./button-DOH4T2Pi.js";import{B as f}from"./badge-D3-7PXND.js";import"./use-merge-refs-BMyyYqY7.js";import"./attr-sHTFgF0E.js";import"./call-all-DDzecCnU.js";const $=({toggleAddUser:j,submitUser:g,doSubmitEditUser:U,showPopUp:P,isEditingUser:m,editedUser:r,showAddUserBoxisEditing:k})=>{const[s,u]=d.useState({addUserNik:"",addUserName:"",addUserEmail:"",addUserPassword:"",addUserPasswordRe:""}),[p,K]=d.useState(null),[h,b]=d.useState(""),y=a=>{const c=a.target.value;b(c)},N=()=>{if(s.addUserPassword!=="")return s.addUserPassword===s.addUserPasswordRe?e.jsx(f,{colorScheme:"green",children:"Kombinasi Password Cocok"}):e.jsx(f,{colorScheme:"red",children:"Kombinasi Password Tidak Sama"})},R=()=>{I.post("/resetPassword",{id:r.id,newPassword:h})},v=a=>{a.preventDefault(),s.addUserPassword!==s.addUserPasswordRe||s.addUserNik===""?P("Gagal","Form Tidak sesuai/Kombinasi password tidak sama!","warning"):g(s)},C=a=>{a.preventDefault(),U(s)};function n(a){const c=a.target.id;let x=a.target.value;c==="addUserNik"&&(x=a.target.value.replace(/[^0-9]/g,"")),u(F=>({...F,[c]:x}))}d.useEffect(()=>()=>clearTimeout(p),[p]);const E=d.useCallback(()=>{u({id:r.id,addUserNik:r.nik,addUserName:r.name,addUserEmail:r.email,addUserPassword:"",addUserPasswordRe:""})},[r]);return d.useEffect(()=>{k===1&&E()},[r]),d.useEffect(()=>{u({id:"",addUserNik:"",addUserName:"",addUserEmail:"",addUserPassword:"",addUserPasswordRe:""})},[]),e.jsx(l,{position:"absolute",top:"0px",left:"0px",direction:"column",bg:"rgba(0, 0, 0, 0.5)",width:"100%",height:"100%",zIndex:20,justifyContent:"center",alignItems:"center",children:e.jsxs(l,{as:"form",onSubmit:m?C:v,position:"relative",px:3,py:3,borderRadius:"6px",width:["90%","90%","70%"],height:"max-content",maxHeight:"550px",overflowY:"auto",border:"1px",borderColor:"gray.200",bg:"white",direction:"column",children:[e.jsx(T,{as:"h3",color:"gray.700",size:"md",children:m?"Edit Info":"Tambah User"}),e.jsx(B,{onClick:j,position:"absolute",right:"12px",top:"5px",cursor:"pointer",children:e.jsx(S,{icon:z})}),e.jsxs(l,{direction:"column",children:[e.jsxs(o,{children:[e.jsx(t,{mt:2,children:"NIK/NIM"}),e.jsx(i,{onChange:n,value:s.addUserNik,id:"addUserNik",size:"sm",placeholder:"Cth: 111222333444",type:"text",required:!0}),e.jsx(M,{children:"NIK Karyawan / Dosen"})]}),e.jsxs(o,{children:[e.jsx(t,{mt:2,children:"Nama"}),e.jsx(i,{onChange:n,value:s.addUserName,id:"addUserName",placeholder:"Masukan Nama",size:"sm",type:"text",required:!0})]}),e.jsxs(o,{children:[e.jsx(t,{mt:2,children:"Email"}),e.jsx(i,{onChange:n,value:s.addUserEmail,id:"addUserEmail",placeholder:"Masukan Email",size:"sm",type:"email",required:!0})]}),m?e.jsxs(l,{alignItems:"flex-end",width:"max-content",children:[e.jsxs(o,{mr:2,children:[e.jsx(t,{mt:2,children:"Reset Password"}),e.jsx(i,{onChange:y,value:h,id:"addUserEmail",placeholder:"Masukan Password Baru",size:"sm",type:"text"})]}),e.jsx(w,{onClick:R,size:"sm",colorScheme:"blue",isDisabled:h.length<1,children:"Reset"})]}):"",m===!1?e.jsxs(e.Fragment,{children:[e.jsxs(o,{children:[e.jsx(t,{mt:2,children:"Password"}),e.jsx(i,{onChange:n,value:s.addUserPassword,id:"addUserPassword",placeholder:"Masukan Password",size:"sm",type:"password",minLength:6,required:!0})]}),e.jsxs(o,{children:[e.jsx(t,{mt:2,children:"Ulangi Password"}),e.jsx(i,{onChange:n,value:s.addUserPasswordRe,id:"addUserPasswordRe",placeholder:"Masukan Ulangi",size:"sm",type:"password",minLength:6,required:!0}),N()]})]}):""]}),e.jsx(l,{mt:3,width:"100%",justifyContent:"flex-end",children:e.jsx(w,{type:"submit",colorScheme:"blue",children:"Simpan"})})]})})};export{$ as default};
